"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1827],{35667:(e,s,t)=>{t.d(s,{GC:()=>j,HZ:()=>p,I4:()=>h,Zv:()=>v});var r=t(86739),a=t(50979);t(4766);var l=t(50253),n=t.n(l),i=t(25963),d=t(36609),c=t(65870),u=t(11028),o=t(37515);function x(){let e=(0,r._)(["py-1 text-sm font-semibold bg-gray-100 rounded-md max-w-max"]);return x=function(){return e},e}let m=d.qy.div(x()),g=e=>(0,i.useMemo)(()=>1===e.length?[e[0],{...e[0],ts:n()(1e3*e[0].ts).add(3,"hours").toDate().getTime()/1e3}]:e,[e]),h=e=>{let{values:s,showHover:t}=e,r=g(s),l=(0,i.useMemo)(()=>{let e=Math.max(...r.map(e=>e.value));return e<.1?[0,.05,.1]:e<.5?[0,.25,.5]:e<1?[0,.5,1]:[0,e/2,e]},[r]);return(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsx)(m,{children:"CPU"}),(0,a.jsx)(u.b,{height:60,chartStyle:{showBorder:!1,showGrid:!0,showHover:null!=t&&t,showArea:!0},lines:[{data:r}],xAxis:{hide:!0,getValue:e=>new Date(1e3*e.ts),tickValues:[]},yAxis:{side:"right",getValue:e=>e.value,renderValue:e=>"".concat(e.toFixed(1)," vCPU"),domain:[l[0],l[l.length-1]],tickValues:l},margin:{bottom:0,left:0,top:8,right:60}})]})},j=e=>{let{values:s,showHover:t}=e,r=g(s),l=(0,i.useMemo)(()=>{let e=Math.max(...r.map(e=>e.value));return e<=.1?[0,.05,.1]:e<=.5?[0,.25,.5]:e<=1?[0,.5,1]:e<=2?[0,1,2]:[0,e/2,e]},[r]);return(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsx)(m,{children:"RAM"}),(0,a.jsx)(u.b,{height:60,chartStyle:{showBorder:!1,showGrid:!0,showHover:null!=t&&t,showArea:!0},lines:[{data:r}],xAxis:{hide:!0,getValue:e=>new Date(1e3*e.ts),tickValues:[]},yAxis:{side:"right",getValue:e=>e.value,renderValue:c.s,domain:[l[0],l[l.length-1]],tickValues:l},margin:{bottom:0,left:0,top:8,right:60}})]})},p=e=>{let{values:s,showHover:t}=e,r=(0,i.useMemo)(()=>{let e=(0,o.A)(s,e=>e.value);return s.map((s,t)=>({...s,value:e[t]}))},[s]),l=(0,i.useMemo)(()=>{let e=Math.max(...r.map(e=>e.value));return e<=.1?[0,.05,.1]:e<=.5?[0,.25,.5]:e<=1?[0,.5,1]:e<=2?[0,1,2]:[0,e/2,e]},[r]);return(0,a.jsxs)("div",{className:"space-y-3 flex-1 mb-6",children:[(0,a.jsx)(m,{children:"Network Egress"}),(0,a.jsx)(u.b,{height:60,chartStyle:{showBorder:!1,showGrid:!0,showHover:null!=t&&t,showArea:!0},lines:[{data:r}],xAxis:{hide:!0,getValue:e=>new Date(1e3*e.ts),tickValues:[]},yAxis:{side:"right",getValue:e=>e.value,renderValue:c.m,domain:[l[0],l[l.length-1]],tickValues:l},margin:{bottom:0,left:0,top:8,right:60}})]})},v=e=>{let{values:s,showHover:t}=e,r=g(s),l=(0,i.useMemo)(()=>{let e=Math.max(...r.map(e=>e.value));return e<=.1?[0,.05,.1]:e<=.5?[0,.25,.5]:e<=1?[0,.5,1]:e<=2?[0,1,2]:[0,e/2,e]},[r]);return(0,a.jsxs)("div",{className:"space-y-3 flex-auto",children:[(0,a.jsx)(m,{children:"Volume"}),(0,a.jsx)(u.b,{height:60,chartStyle:{showBorder:!1,showGrid:!0,showHover:null!=t&&t,showArea:!0},lines:[{data:r}],xAxis:{hide:!0,getValue:e=>new Date(1e3*e.ts),tickValues:[]},yAxis:{side:"right",getValue:e=>e.value,renderValue:c.m,domain:[l[0],l[l.length-1]],tickValues:l},margin:{bottom:0,left:0,top:8,right:60}})]})}},38369:(e,s,t)=>{t.d(s,{C$:()=>C,Vo:()=>A});var r=t(86739),a=t(50979),l=t(4766),n=t(80428),i=t(13025),d=t(41110),c=t.n(d),u=t(25963),o=t(2888),x=t(57092),m=t(2551),g=t(36609),h=t(31754),j=t(13077),p=t(67970),v=t(37590),U=t(95662),b=t(18970),G=t(42419),M=t(36725),f=t(35667);function N(){let e=(0,r._)(["w-full"]);return N=function(){return e},e}function _(){let e=(0,r._)(["py-4 text-sm"]);return _=function(){return e},e}function w(){let e=(0,r._)([""]);return w=function(){return e},e}function B(){let e=(0,r._)(["project-usage-item"]);return B=function(){return e},e}let k=e=>e.toFixed(e<1?4:2),C=e=>{let{projectUsage:s,isPreviousMonth:t,defaultExpanded:r=!1,allowExpansion:i=!0,billingPeriod:d}=e,{currentUsage:c,estimatedUsage:o,project:x}=s,[h,p]=(0,u.useState)(r),v=null!=x.deletedAt,b=(0,u.useMemo)(()=>(0,l.costForUsageItem)(s.currentUsage),[s]);return(0,a.jsxs)(F,{animate:h?"expanded":"",isExpanded:h,children:[(0,a.jsxs)("button",{onClick:()=>{i&&p(!h)},className:(0,g.xW)("group","flex items-center justify-between w-full space-x-4","focus:outline-none",!i&&"cursor-default"),children:[(0,a.jsx)("h3",{className:"text-lg overflow-hidden overflow-ellipsis whitespace-nowrap",children:x.name}),(0,a.jsxs)(U.z,{align:"center",space:4,children:[(0,a.jsxs)(U.z,{space:8,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(G.ae,{children:"Current Cost"}),(0,a.jsxs)(G.mM,{className:"text-right",children:["$",k((0,l.costForUsageItem)(c))]})]}),v&&null!=x.deletedAt?(0,a.jsxs)("div",{className:"text-red-600 hidden md:block",children:[(0,a.jsx)("p",{className:"mb-0 text-xs text-right",children:"Deleted on"}),(0,a.jsx)(G.mM,{className:"text-right",children:(0,a.jsx)(M.g,{timeStyle:!1,children:x.deletedAt})})]}):t?null:(0,a.jsxs)("div",{className:"text-gray-600 hidden md:block",children:[(0,a.jsx)(G.ae,{children:"Estimated"}),(0,a.jsxs)(G.mM,{className:"text-right",children:["$",(0,l.costForUsageItem)(o).toFixed(2)]})]})]}),i&&(0,a.jsx)(j.In,{icon:h?m.rXn:m.yQN,size:"sm",className:"text-gray-500"})]})]}),(0,a.jsx)(n.N,{children:h&&(0,a.jsx)(E,{projectId:s.project.id,defaultExpanded:r,isProjectDeleted:v,totalCost:b,billingPeriod:d})})]})},E=e=>{var s,t,r,l,n,d,c,o,m;let{projectId:j,defaultExpanded:U,isProjectDeleted:M,totalCost:N,billingPeriod:_,className:w}=e,[B,C]=(0,u.useState)(!1),{result:E}=(0,x.m)({projectId:j,billingPeriod:_}),y=null==(s=E.data)?void 0:s.metrics,I=null==(t=E.data)?void 0:t.project;return(0,a.jsxs)(i.P.div,{initial:U?"open":"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.2,ease:"easeInOut"},className:(0,g.xW)("mt-4",w),children:[!M&&(void 0!=y?(0,a.jsxs)(a.Fragment,{children:[!!y.cpuMetrics.length&&(0,a.jsx)(f.I4,{values:y.cpuMetrics,showHover:!0}),!!y.memMetrics.length&&(0,a.jsx)(f.GC,{values:y.memMetrics,showHover:!0}),!!y.egressMetrics.length&&(0,a.jsx)(f.HZ,{values:y.egressMetrics,showHover:!0}),!!y.diskMetrics.length&&(0,a.jsx)(f.Zv,{values:y.diskMetrics,showHover:!0})]}):(0,a.jsx)(p.m6,{})),(0,a.jsxs)("div",{className:"mt-8 hidden md:flex items-center justify-between",children:[(0,a.jsx)(G.ax,{className:"font-semibold",children:B?"Cost by Service":"Project Cost"}),!M&&(0,a.jsx)(h.z9,{variant:"coloured",onClick:()=>C(e=>!e),className:"text-sm",children:B?"View Project Cost":"View Cost by Service"})]}),(0,a.jsxs)("div",{className:"mt-6 hidden md:block",children:[E.isLoading?(0,a.jsx)(v.g,{width:"100%",height:213}):(0,a.jsx)(b.J6,{className:"border-l-0 border-r-0 rounded-none",children:B?(0,a.jsx)(S,{serviceUsages:null!=(d=null==(r=E.data)?void 0:r.serviceUsages)?d:{},services:null!=(c=null==I?void 0:I.services)?c:[],pluginUsages:null!=(o=null==(l=E.data)?void 0:l.pluginUsages)?o:{},plugins:null!=(m=null==I?void 0:I.plugins)?m:[]}):(null==(n=E.data)?void 0:n.currentUsage)!=null?(0,a.jsx)(H,{currentUsage:E.data.currentUsage}):null}),(0,a.jsxs)("div",{className:"flex justify-between my-4 items-end",children:[(0,a.jsx)(G.EY,{className:"text-xs",children:"Metrics are shown as minutely accumulated values"}),(0,a.jsxs)(G.EY,{className:"font-semibold",children:["$",k(N)]})]})]})]},"content")},y=g.qy.table(N()),I=g.qy.td(_()),P=g.qy.tr(w()),z=g.qy.tbody(B()),A="px-4 py-3 overflow-hidden rounded-lg bg-secondaryBg",F=(0,g.DR)(i.P.div)(e=>[A,"relative transition-all duration-200","hover:bg-gray-100",e.isExpanded&&"bg-gray-100"]),S=e=>{let{services:s,serviceUsages:t,plugins:r,pluginUsages:n}=e,i=(0,u.useMemo)(()=>c()(s,[e=>null!=t[e.id]?(0,l.costForUsageItem)(t[e.id]):0],["desc"]),[s,t]),d=(0,u.useMemo)(()=>{let e=l.EMPTY_USAGE_ITEM;for(let[r,a]of Object.entries(t))null==s.find(e=>e.id===r)&&(e=(0,l.sumUsage)(e,a));return e},[s,t]),o=[...Object.values(t),...Object.values(n)].some(e=>e.backupGB>0);return(0,a.jsxs)("div",{className:(0,g.xW)("grid gap-x-2 gap-y-8 py-4  overflow-x-auto items-start",o?"grid-cols-[auto_1fr_1fr_1fr_1fr_1fr_1fr]":"grid-cols-[auto_1fr_1fr_1fr_1fr_1fr]"),children:[i.map(e=>{var s;return(0,a.jsx)(V,{name:e.name,usage:null!=(s=t[e.id])?s:l.EMPTY_USAGE_ITEM,showBackupCell:o},e.id)}),r.map(e=>{var s;return(0,a.jsx)(D,{name:e.name,usage:null!=(s=n[e.id])?s:l.EMPTY_USAGE_ITEM,showBackupCell:o},e.id)}),(0,a.jsx)(V,{name:"deleted services",usage:d,showBackupCell:o,isDeleted:!0})]})},V=e=>{let{name:s,usage:t,showBackupCell:r,isDeleted:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(U.z,{align:"center",space:4,className:(0,g.xW)("max-w-[180px] whitespace-nowrap",l&&"text-gray-500"),children:[(0,a.jsx)(j.In,{icon:l?m.TBR:m.gqo}),(0,a.jsx)("p",{className:(0,g.xW)("overflow-hidden overflow-ellipsis",l&&"text-gray-500"),children:s})]}),(0,a.jsx)(R,{currentUsage:t}),(0,a.jsx)($,{currentUsage:t}),(0,a.jsx)(O,{currentUsage:t}),(0,a.jsx)(Y,{currentUsage:t}),r&&(0,a.jsx)(L,{currentUsage:t}),(0,a.jsx)(T,{currentUsage:t})]})},D=e=>{let{name:s,usage:t,showBackupCell:r}=e,l=(0,u.useMemo)(()=>o.Gg[s],[s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(U.z,{align:"center",space:4,className:"max-w-[180px] whitespace-nowrap",children:[(0,a.jsx)(j.In,{icon:l.icon}),(0,a.jsx)("p",{className:"overflow-hidden overflow-ellipsis",children:s})]}),(0,a.jsx)(R,{currentUsage:t}),(0,a.jsx)($,{currentUsage:t}),(0,a.jsx)(O,{currentUsage:t}),(0,a.jsx)(Y,{currentUsage:t}),r&&(0,a.jsx)(L,{currentUsage:t}),(0,a.jsx)(T,{currentUsage:t})]})},T=e=>{let{currentUsage:s}=e,t=(0,u.useMemo)(()=>(0,l.costForUsageItem)(s),[s]);return(0,a.jsxs)("p",{className:"text-right text-sm align-top tabular-nums",children:["$",k(t)]})},R=e=>{let{currentUsage:s}=e;return(0,a.jsxs)("div",{className:"grid gap-1 text-end",children:[(0,a.jsx)(G.xC,{className:"font-semibold",children:"CPU"}),(0,a.jsxs)(G.ax,{children:[s.cpuPercentvCPU.toFixed(2)," vCPU"]}),(0,a.jsxs)(G.tj,{children:["$",(s.cpuPercentvCPU*l.PRICE_MINUTELY_VCPU).toFixed(4)]})]})},$=e=>{let{currentUsage:s}=e;return(0,a.jsxs)("div",{className:"grid gap-1 text-end",children:[(0,a.jsx)(G.xC,{className:"font-semibold",children:"RAM"}),(0,a.jsxs)(G.ax,{children:[s.memoryUsageGB.toFixed(2)," GB"]}),(0,a.jsxs)(G.tj,{children:["$",(s.memoryUsageGB*l.PRICE_MINUTELY_MEM_GB).toFixed(4)]})]})},Y=e=>{let{currentUsage:s}=e;return(0,a.jsxs)("div",{className:"grid gap-1 text-end",children:[(0,a.jsx)(G.xC,{className:"font-semibold",children:"Volume"}),(0,a.jsxs)(G.ax,{children:[s.diskGB.toFixed(2)," GB"]}),(0,a.jsxs)(G.tj,{children:["$",(s.diskGB*l.PRICE_MINUTELY_DISK_GB).toFixed(4)]})]})},L=e=>{let{currentUsage:s}=e;return(0,a.jsx)("div",{className:"grid gap-1 text-end",children:s.backupGB>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G.xC,{className:"font-semibold",children:"Volume Backup"}),(0,a.jsxs)(G.ax,{children:[s.backupGB.toFixed(2)," GB"]}),(0,a.jsxs)(G.tj,{children:["$",(s.backupGB*l.PRICE_MINUTELY_BACKUP_GB).toFixed(4)]})]})})},O=e=>{let{currentUsage:s}=e;return(0,a.jsxs)("div",{className:"grid gap-1 text-end",children:[(0,a.jsx)(G.xC,{className:"font-semibold",children:"Egress"}),(0,a.jsxs)(G.ax,{children:[s.egressGB.toFixed(2)," GB"]}),(0,a.jsxs)(G.tj,{children:["$",(s.egressGB*l.PRICE_EGRESS_GB).toFixed(4)]})]})},H=e=>{let{currentUsage:s}=e;return(0,a.jsx)(y,{children:(0,a.jsxs)(z,{children:[(0,a.jsxs)(P,{children:[(0,a.jsx)(I,{children:"Memory"}),(0,a.jsxs)(I,{children:[s.memoryUsageGB.toFixed(2)," minutely GB"]}),(0,a.jsxs)(I,{children:["$",l.PRICE_MINUTELY_MEM_GB.toFixed(6)," / GB / Minute"]}),(0,a.jsxs)(I,{className:"text-right tabular-nums",children:["$",(s.memoryUsageGB*l.PRICE_MINUTELY_MEM_GB).toFixed(4)]})]}),(0,a.jsxs)(P,{children:[(0,a.jsx)(I,{children:"CPU"}),(0,a.jsxs)(I,{children:[s.cpuPercentvCPU.toFixed(2)," minutely vCPU"]}),(0,a.jsxs)(I,{children:["$",l.PRICE_MINUTELY_VCPU.toFixed(6)," / vCPU / Minute"]}),(0,a.jsxs)(I,{className:"text-right tabular-nums",children:["$",(s.cpuPercentvCPU*l.PRICE_MINUTELY_VCPU).toFixed(4)]})]}),(0,a.jsxs)(P,{children:[(0,a.jsx)(I,{children:"Egress"}),(0,a.jsxs)(I,{children:[s.egressGB.toFixed(2)," total GB"]}),(0,a.jsxs)(I,{children:["$",l.PRICE_EGRESS_GB.toFixed(2)," / GB"]}),(0,a.jsxs)(I,{className:"text-right tabular-nums",children:["$",(s.egressGB*l.PRICE_EGRESS_GB).toFixed(4)]})]}),s.diskGB>0&&(0,a.jsxs)(P,{children:[(0,a.jsx)(I,{children:"Volume"}),(0,a.jsxs)(I,{children:[s.diskGB.toFixed(2)," minutely GB"]}),(0,a.jsxs)(I,{children:["$",l.PRICE_MINUTELY_DISK_GB.toFixed(8)," / GB / Minute"]}),(0,a.jsxs)(I,{className:"text-right tabular-nums",children:["$",(s.diskGB*l.PRICE_MINUTELY_DISK_GB).toFixed(4)]})]}),s.backupGB>0&&(0,a.jsxs)(P,{children:[(0,a.jsx)(I,{children:"Backup"}),(0,a.jsxs)(I,{children:[s.backupGB.toFixed(2)," minutely GB"]}),(0,a.jsxs)(I,{children:["$",l.PRICE_MINUTELY_BACKUP_GB.toFixed(8)," / GB / Minute"]}),(0,a.jsxs)(I,{className:"text-right tabular-nums",children:["$",(s.backupGB*l.PRICE_MINUTELY_BACKUP_GB).toFixed(4)]})]})]})})}},55211:(e,s,t)=>{t.d(s,{a:()=>g});var r=t(50979),a=t(50253),l=t.n(a),n=t(87531),i=t.n(n),d=t(11768),c=t.n(d),u=t(25963),o=t(31754),x=t(2551),m=t(95662);l().extend(i()),l().extend(c());let g=e=>{let{currentBillingPeriod:s,billingPeriod:t,setBillingPeriod:a,isPreviousMonth:n,isFirstMonth:i=!1}=e,d=(0,u.useMemo)(()=>{let e=l()().subtract(90,"days");return l()(t.start).subtract(1,"month").isAfter(e)},[t]);return(0,r.jsx)(m.T,{children:(0,r.jsxs)(m.z,{align:"center",space:2,className:"hidden md:flex",children:[(0,r.jsx)(o.K0,{title:"Previous month",icon:x.JGc,disabled:i||!d,onClick:()=>{a({start:l()(t.start).subtract(1,"month").toDate(),end:t.start})}}),(0,r.jsxs)("span",{children:[l()(t.start).format("MMM D")," -"," ",l()(t.end).format("MMM D")]}),(0,r.jsx)(o.K0,{title:"Next Month",icon:x.c_$,disabled:!n,onClick:()=>{if(l()(t.end).add(1,"month").isSameOrAfter(l()(s.end)))return void a(s);a({start:l()(t.start).add(1,"month").toDate(),end:l()(t.end).add(1,"month").toDate()})}})]})})}},57092:(e,s,t)=>{t.d(s,{m:()=>h,t:()=>j});var r=t(4766),a=t(50253),l=t.n(a),n=t(11768),i=t.n(n),d=t(14966),c=t.n(d),u=t(25963),o=t(45479),x=t(5979),m=t(97865),g=t(55850);l().extend(i());let h=e=>{let{projectId:s,billingPeriod:t}=e,{graphqlClient:r}=(0,g.q)();return(0,m.W)(["singleProjectMetricsAndUsage",{projectId:s,billingPeriod:t}],async()=>{var e,a;if(!t)return null;let l=await r.singleProjectMetricsAndUsage({projectId:s,metricsMeasurements:[o.zc2.MemoryUsageGb,o.zc2.CpuUsage,o.zc2.NetworkTxGb,o.zc2.DiskUsageGb,o.zc2.BackupUsageGb],usageMeasurements:[o.zc2.MemoryUsageGb,o.zc2.CpuUsage,o.zc2.NetworkTxGb,o.zc2.DiskUsageGb,o.zc2.BackupUsageGb],startDate:t.start.toISOString(),endDate:t.end.toISOString(),sampleRateSeconds:1e4}),n=(0,x.nX)(l.project),i=n.services||[],d=n.plugins||[],u=U(l.usage),m=G(l.estimatedUsage),g=p({metrics:l.metrics,projectCreatedAt:null==n?void 0:n.createdAt,projectDeletedAt:null==n?void 0:n.deletedAt}),h=c()((null!=(e=l.usage)?e:[]).filter(e=>null!=e.tags.serviceId),e=>e.tags.serviceId),j=c()((null!=(a=l.usage)?a:[]).filter(e=>null!=e.tags.pluginId),e=>e.tags.pluginId),v={},b={};for(let[e,s]of Object.entries(h))v[e]=U(s);for(let[e,s]of Object.entries(j))b[e]=U(s);return{project:n,currentUsage:u,estimatedUsage:m,metrics:g,services:i,plugins:d,serviceUsages:v,pluginUsages:b}},{enabled:!!t})},j=e=>{var s,t;let{teamId:r,billingPeriod:a}=e,{graphqlClient:l}=(0,g.q)(),{result:n}=(0,m.W)(["allProjectUsageV2",{teamId:r,billingPeriod:a}],async()=>a&&r?await l.allProjectUsage({teamId:r,usageMeasurements:[o.zc2.MemoryUsageGb,o.zc2.CpuUsage,o.zc2.NetworkTxGb,o.zc2.DiskUsageGb,o.zc2.BackupUsageGb],startDate:a.start.toISOString(),endDate:a.end.toISOString(),includeDeleted:!0}):null,{enabled:!!a}),{currentUsage:i,estimatedUsage:d}=M(null==(s=n.data)?void 0:s.usage,null==(t=n.data)?void 0:t.estimatedUsage),c=(0,u.useMemo)(()=>{var e,s;return(null!=(s=null==(e=n.data)?void 0:e.projects.edges)?s:[]).map(e=>{var s,t,r,a;let{node:l}=e;return{currentUsage:U((null!=(r=null==(s=n.data)?void 0:s.usage)?r:[]).filter(e=>e.tags.projectId===l.id)),estimatedUsage:G((null!=(a=null==(t=n.data)?void 0:t.estimatedUsage)?a:[]).filter(e=>e.projectId===l.id)),project:{id:l.id,name:l.name,deletedAt:null!=l.deletedAt?new Date(l.deletedAt):null,createdAt:null!=l.createdAt?new Date(l.createdAt):null}}})},[n.data]);return{currentUsage:i,estimatedUsage:d,result:n,projectUsages:c}},p=e=>{let{metrics:s,projectCreatedAt:t,projectDeletedAt:r}=e,a=e=>{var t,r;return null!=(r=null==(t=(null!=s?s:[]).find(s=>s.measurement===e))?void 0:t.values)?r:[]},n=a(o.zc2.CpuUsage),i=a(o.zc2.MemoryUsageGb),d=a(o.zc2.NetworkRxGb),c=a(o.zc2.NetworkTxGb),u=a(o.zc2.DiskUsageGb),x=a(o.zc2.BackupUsageGb);return l()(null!=r?l()(r):l()()).diff(l()(t),"minute"),{cpuMetrics:n,memMetrics:i,ingressMetrics:d,egressMetrics:c,diskMetrics:u,backupMetrics:x}},v=(e,s)=>e.filter(e=>e.measurement===s).reduce((e,s)=>e+s.value,0),U=e=>{let s=v(e,o.zc2.MemoryUsageGb),t=v(e,o.zc2.CpuUsage),r=v(e,o.zc2.NetworkRxGb),a=v(e,o.zc2.NetworkTxGb);return{memoryUsageGB:s,cpuPercentvCPU:t,ingressGB:r,egressGB:a,diskGB:v(e,o.zc2.DiskUsageGb),backupGB:v(e,o.zc2.BackupUsageGb)}},b=(e,s)=>e.filter(e=>e.measurement===s).reduce((e,s)=>e+s.estimatedValue,0),G=e=>{let s=b(e,o.zc2.MemoryUsageGb),t=b(e,o.zc2.CpuUsage),r=b(e,o.zc2.NetworkRxGb),a=b(e,o.zc2.NetworkTxGb);return{memoryUsageGB:s,cpuPercentvCPU:t,egressGB:a,ingressGB:r,diskGB:b(e,o.zc2.DiskUsageGb),backupGB:b(e,o.zc2.BackupUsageGb)}},M=(e,s)=>({currentUsage:(0,u.useMemo)(()=>null==e?r.EMPTY_USAGE_ITEM:U(e),[e]),estimatedUsage:(0,u.useMemo)(()=>null==s?r.EMPTY_USAGE_ITEM:G(s),[s])})}}]);