"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6376],{6030:(e,l,a)=>{a.d(l,{D:()=>m});var t=a(50979),i=a(75676),n=a(25963),s=a(2551),r=a(79006),o=a(59641),c=a(13077),d=a(36609),u=a(74206);let m=e=>{let{setIsCompleteCard:l,onTaxIdChange:a,existingTaxId:i,isReplacing:d=!1}=e,[m,p]=(0,n.useState)(null),[x,g]=(0,n.useState)(!!i),v=(()=>{let{colorMode:e}=(0,r.DP)(),l={light:"#13111c",dark:"#ffffff"};return(0,n.useMemo)(()=>{let a=getComputedStyle(document.documentElement),t=e=>{let l=a.getPropertyValue(e).trim();return l.startsWith("hsl")?(0,o.r)(l):l};return{iconStyle:"solid",style:{base:{color:l[e],fontSmoothing:"antialiased",borderRadius:"6px",focusOutline:"1px solid ".concat(t("--pink-400")),"::placeholder":{color:t("--gray-500")},height:52},invalid:{iconColor:t("--red-500"),color:t("--red-500")}}}},[e])})();return(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsx)(h,{options:v,onChange:e=>{null!=l&&l(e.complete),e.error?p(e.error.message):p(null)},error:m,className:"w-auto"}),!d&&x&&a&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(u.F,{value:null==i?void 0:i.value,type:null==i?void 0:i.type,onChange:a,size:"sm"})}),!d&&(0,t.jsx)("div",{className:"flex gap-4",children:!x&&(0,t.jsxs)("button",{className:"grid py-2 text-sm grid-cols-[min-content,minmax(0,auto)] items-center gap-1 text-neutral-secondary hover:text-primary underline",onClick:()=>g(e=>!e),children:[(0,t.jsx)(c.In,{icon:s.FWt,size:"sm"}),i?"Edit":"Add"," Tax ID"]})}),null!=m&&(0,t.jsxs)("div",{className:"text-sm text-red-500 space-x-2 flex items-center mt-1",role:"alert",children:[(0,t.jsx)(c.In,{icon:s.RIJ}),(0,t.jsx)("span",{children:m})]})]})},h=(0,d.DR)(i.CardElement)(e=>["border rounded-md px-4 py-2.5 h-10 w-max",null!=e.error?"border-red-500":"border-gray-200 hover:border-gray-400 [&.StripeElement--focus]:border-pink-400"])},34786:(e,l,a)=>{a.d(l,{B:()=>c});var t=a(95925),i=a(25963),n=a(55850),s=a(72898),r=a(73648),o=a(45588);let c=()=>{let{workspaceCustomer:e,workspace:l}=(0,r.hA)(),a=["augmented",null==l?void 0:l.id,"customer",null==e?void 0:e.id],c=(0,t.jE)(),{graphqlClient:d}=(0,n.q)(),u=(0,s.n)(a,async l=>{e&&(await d.customerUpdateBillingEmail({id:e.id,input:{email:l}}),await c.invalidateQueries())}),m=(0,s.n)(a,async l=>{var a;let{paymentMethodId:t,validateWithHold:i}=l;if(e)return null!=(a=(await d.customerAttachPaymentMethod({id:e.id,input:{paymentMethodId:t,validateWithHold:i}})).customerAttachPaymentMethod)?a:{paymentIntent:null}}),h=(0,s.n)(a,async()=>{e&&(await d.customerDeletePaymentMethods({id:e.id}),await c.invalidateQueries())}),p=(0,s.n)(a,async l=>{let{dollarAmount:a,paymentMethodId:t}=l;if(!e)return;let i=await d.customerPurchaseCredits({id:e.id,input:{amountDollars:a,paymentMethodId:t}});return setTimeout(()=>c.invalidateQueries(),1e3),setTimeout(()=>c.invalidateQueries(),2e3),setTimeout(()=>c.invalidateQueries(),5e3),i.customerPurchaseCredits}),x=(0,s.n)(a,async l=>{let{feedback:a,comment:t}=l;if(!e)return;let i=await d.customerCancelSubscription({id:e.id,feedback:a,comment:t});return await c.invalidateQueries(),i.customerCancelSubscription}),g=(0,s.n)(a,async l=>{let{billingAddress:a,taxId:t}=l;e&&(await d.customerUpdateBillingDetails({id:e.id,input:{billingAddress:a,taxId:t}}),await c.invalidateQueries())}),v=(0,s.n)(a,async l=>{e&&(await d.customerDeleteTaxId({id:e.id,taxIdId:l}),await c.invalidateQueries())}),y=(0,s.n)(a,async()=>{if(!e)return;let l=await d.customerRenewSubscription({id:e.id});return await c.invalidateQueries(),l.customerRenewSubscription});return(0,i.useMemo)(()=>({updateBillingEmail:u,deletePaymentMethods:h,attachPaymentMethod:m,purchaseCredits:p,updateBillingDetails:g,deleteTaxId:v,cancelSubscription:x,renewSubscription:y,createCustomerSubscription:async l=>{let{posthogSessionId:a,paymentMethodId:t,subscriptionModel:i}=l;if(!e)return;let n=(await d.customerCreateUsageSubscription({id:e.id,input:{paymentMethodId:t,subscriptionModel:i,posthogSessionId:a}})).customerCreateUsageSubscription;return c.invalidateQueries({queryKey:o.WN}),n},retrySubscriptionInvoice:async(l,a)=>{if(!e)return;let t=(await d.customerRetryInvoice({id:e.id,input:{invoiceId:l,paymentMethodId:a}})).customerRetryInvoice;return c.invalidateQueries({queryKey:o.WN}),t},redirectToBillingPortal:async()=>{if(!e)return;let l=(await d.customerCreateBillingPortal({id:e.id,input:{redirectUrl:window.location.href}})).customerCreateBillingPortal;window.location.href=l}}),[e,a])}},46376:(e,l,a)=>{a.r(l),a.d(l,{BillBreakdown:()=>ed,BillItemInfo:()=>ec,CreditsBreakdown:()=>eu,FreePlanInfoCard:()=>en,HistoricalBillBreakdown:()=>em,HobbyPlanInfoCard:()=>et,ProPlanInfoCard:()=>ea,ResourceInfoItem:()=>es,TrialPlanInfoCard:()=>ei,default:()=>eg});var t=a(50979),i=a(4766),n=a(50253),s=a.n(n),r=a(11768),o=a.n(r),c=a(25963),d=a(30358),u=a(55211),m=a(42419),h=a(95662);a(70336);var p=a(36609),x=a(86739),g=a(13025),v=a(41110),y=a.n(v),j=a(30595),_=a(2551),b=a(77505),C=a(13077),P=a(90029),U=a(38369);function f(){let e=(0,x._)(["space-y-3"]);return f=function(){return e},e}let M=e=>{let{result:l,projectUsages:a,isPreviousMonth:n,numProjects:s,billingPeriod:r}=e,{modalActions:o}=(0,b.U)(),[d,u]=(0,j.A)("@railway/usage/showDeletedProjects",{defaultValue:!0}),h=(0,c.useMemo)(()=>y()(a.filter(e=>(0,i.costForUsageItem)(e.currentUsage)>0),[e=>(0,i.costForUsageItem)(e.currentUsage)],["desc"]),[a]),{activeProjects:p,deletedProjects:x}=(0,c.useMemo)(()=>{let e=[],l=[];for(let a of h)null==a.project.deletedAt?e.push(a):l.push(a);return{activeProjects:e,deletedProjects:l}},[h]),g=(0,c.useMemo)(()=>x.reduce((e,l)=>e+(0,i.costForUsageItem)(l.currentUsage),0),[x]);return(0,t.jsx)("div",{children:null!=l.error?(0,t.jsx)(m.yn,{children:l.error.message}):l.isLoading?(0,t.jsx)(E,{numProjects:null!=s?s:0}):p.length+(d?x.length:0)===0?(0,t.jsx)(m.EY,{children:"No project usage this month"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(N,{initial:"hidden",animate:"visible",variants:I,children:[p.map(e=>(0,t.jsx)(U.C$,{projectUsage:e,isPreviousMonth:n,billingPeriod:r},e.project.id)),d&&(0,t.jsx)(t.Fragment,{children:x.map(e=>(0,t.jsx)(U.C$,{projectUsage:e,isPreviousMonth:n,billingPeriod:r},e.project.id))})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center justify-between space-x-4 mt-6 text-xs text-gray-500",children:[(0,t.jsxs)("button",{onClick:()=>o.openModal((0,t.jsx)(B,{})),className:"flex items-center space-x-1.5 hover:text-foreground focus:outline-none",children:[(0,t.jsx)(C.In,{icon:_.R2D,size:"xs"}),(0,t.jsx)("span",{children:"How usage is estimated"})]}),x.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[Math.round(g)>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["$",g.toFixed(2)," used by Deleted Projects"]}),(0,t.jsx)("span",{children:"\xb7"})]}),(0,t.jsx)("button",{onClick:()=>u(e=>!e),className:"text-pink-600 rounded-md hover:text-pink-700 focus:outline-none focus-visible:ring-2 ring-pink-500",children:d?"Hide Deleted Projects":"Show Deleted Projects"})]})]})]})})},E=e=>{let{numProjects:l}=e;return(0,t.jsx)(N,{children:Array.from({length:l}).map((e,l)=>(0,t.jsx)("div",{className:U.Vo,style:{height:81}},l))})},N=(0,p.DR)(g.P.div)(f()),I={hidden:{transition:{when:"afterChildren"}},visible:{transition:{when:"beforeChildren",staggerChildren:.1}}},B=()=>(0,t.jsx)(P.EN,{title:"Usage Estimation",children:"We extrapolate the usage of each running container in all environments. Large increases/decreases in future project usage will change total cost at the end of the month"});var w=a(64657),S=a(31754);a(47654);var T=a(67970),L=a(37590),k=a(81009),R=a(55802),D=a(35356),A=a(75676),G=a(6438),z=a(69152),F=a(25508),Y=a(56757),$=a(34786),O=a(73648),H=a(61259),K=a(86954),V=a(6030),q=a(45588),Q=a(70375);let W=(0,G.c)("pk_live_51HNrvlCJoPsRzQsdhv2DcOFeyBnr2dUEqlitVOpmr5S7BAzg5w4Aj7NtZfonqilddhEdVtK1xALvkaN3J0a9o5p900N0ORMqp6"),J=()=>{let[{user:e}]=(0,q.Jd)(),{isHobby:l,isPro:a}=(0,O.hA)();return null==e?null:(0,t.jsxs)(P.aF,{title:l||a?"Purchase Railway Credits":"Switch to Hobby plan",children:[(0,t.jsx)(P.wt,{className:"mb-2",children:l||a?"Purchase Railway Credits":"Switch to Hobby plan"}),(0,t.jsx)(P.xW,{className:"mb-6",children:l||a?"Credits will be automatically applied to your usage":(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(t.Fragment,{children:["Upgrade to the Hobby plan to continue using Railway."," ",(0,t.jsx)("strong",{children:"When you upgrade, your credit balance will be deducted to cover the monthly $5 subscription fee"}),", which includes $5 of usage."]})})}),(0,t.jsx)(A.Elements,{stripe:W,children:(0,t.jsx)(Z,{})})]})},Z=()=>{let e=(0,A.useStripe)(),{getPaymentMethodFromCardElement:l,handlePaymentIntentThatRequiresCustomerAction:a}=(0,Y.O)(),[{user:n}]=(0,q.Jd)(),{customer:s}=(0,O.mz)(),{isPro:r,isHobby:o}=(0,O.hA)(),{modalActions:d}=(0,b.U)(),{id:u}=(0,P.eR)(),{purchaseCredits:p,redirectToBillingPortal:x}=(0,$.B)(),[g,v]=(0,F.b)(),[y,j]=(0,c.useState)(""),[_,C]=(0,c.useState)(!1),{navActions:U,routes:f}=(0,Q.c)(),M=null==s?void 0:s.creditBalance,E=(0,c.useMemo)(()=>M?""===y.trim()?M:M+parseFloat(y):null,[M,y]),N=(0,c.useMemo)(()=>z.G.test(y),[y]),I=async()=>{if(null==e)throw Error("Stripe is not ready");C(!0);let t=(null==s?void 0:s.defaultPaymentMethod)!=null;try{var i;let e=null==(i=await l())?void 0:i.paymentMethod;if(!t&&null==e)throw Error("Payment method is required");let n=parseFloat(y),s=await p({dollarAmount:n,paymentMethodId:null==e?void 0:e.id});null!=s&&await a(s),d.exitModal(u)}catch(e){v(e.message)}C(!1),o||r||U.push(f.workspaceUpgrade({}))};return null==n?null:(0,t.jsxs)(H.lV,{onSubmit:I,name:"Purchase Credits",className:"space-y-4",children:[null!=g&&(0,t.jsx)(m.yn,{children:g}),(0,t.jsxs)(h.z,{space:2,className:"w-full",children:[(0,t.jsxs)("div",{className:"bg-gray-100 rounded-md p-4 flex-grow",children:[(0,t.jsx)(H.JU,{as:"span",children:"Current balance"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:["$",M?M.toFixed(2):"-"]})]}),(0,t.jsxs)("div",{className:"bg-gray-100 rounded-md p-4 flex-grow",children:[(0,t.jsx)(H.JU,{as:"span",children:"New Balance"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:M==E||null==E?"--":(0,t.jsx)(t.Fragment,{children:o||r?"$".concat(E.toFixed(2)):"$".concat(E," - $").concat(i.PRODUCTS.HobbyPlan.price.cost," = $").concat(E-5)})})]})]}),(0,t.jsxs)(h.T,{children:[(0,t.jsx)(K.pd,{name:"amount",label:"Amount",value:y,onChange:e=>j(e.target.value),placeholder:"Amount",type:"number",className:"mb-2",min:i.MIN_CREDIT_PURCHASE_AMOUNT_DOLLARS,max:i.MAX_CREDIT_PURCHASE_AMOUNT_DOLLARS}),(0,t.jsxs)(h.z,{space:2,children:[(0,t.jsx)(S.$n,{type:"button",variant:"outline",color:"blue",onClick:()=>j("10"),children:"$10.00"}),(0,t.jsx)(S.$n,{type:"button",variant:"outline",color:"blue",onClick:()=>j("15"),children:"$15.00"}),(0,t.jsx)(S.$n,{type:"button",variant:"outline",color:"blue",onClick:()=>j("20"),children:"$20.00"}),(0,t.jsx)(S.$n,{type:"button",variant:"outline",color:"blue",onClick:()=>j("50"),children:"$50.00"})]})]}),(0,t.jsxs)(h.T,{children:[(0,t.jsx)(H.JU,{children:"Payment details"}),(null==s?void 0:s.defaultPaymentMethod)!=null?(0,t.jsxs)(h.z,{space:1,align:"center",justify:"between",children:[null!=s.defaultPaymentMethod.card?(0,t.jsxs)(m.EY,{children:["Using card ending in ",s.defaultPaymentMethod.card.last4]}):(0,t.jsx)(m.EY,{children:"Using default payment method"}),(0,t.jsx)(S.$n,{onClick:()=>x(),variant:"outline",color:"gray",size:"sm",type:"button",className:"max-w-max",children:"Manage"})]}):(0,t.jsx)(V.D,{})]}),(0,t.jsxs)(h.z,{space:4,justify:"end",children:[(0,t.jsx)(S.$n,{type:"button",color:"gray",onClick:()=>d.exitModal(u),children:"Cancel"}),(0,t.jsx)(S.$n,{type:"submit",disabled:!N||""===y.trim()||M===E,isLoading:_,children:o||r?"Add Credit":"Switch to Hobby"})]})]})};var X=a(71310),ee=a(57092),el=a(79006);s().extend(o());let ea=()=>{let{redirectToBillingPortal:e}=(0,$.B)(),[l,a]=(0,c.useState)(!1),{colorMode:n}=(0,el.DP)(),{modalActions:s}=(0,b.U)(),r=i.subscriptionPlanLimits.pro,o=async()=>{a(!0),e()};return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 items-center gap-6 md:gap-8 rounded-lg p-6 border border-pink-200 relative overflow-hidden",children:[(0,t.jsx)("img",{alt:"",src:"/billing/chart-".concat("light"===n?"light":"dark",".svg"),className:"absolute bottom-0 left-1/3 hidden lg:flex -z-1"}),(0,t.jsxs)(h.T,{space:1,children:[(0,t.jsx)(m.EY,{children:"Pro Plan"}),(0,t.jsx)(m.tj,{className:"text-gray-500",children:"Usage-based Subscription"})]}),(0,t.jsxs)(m.ax,{className:"text-pink-600 max-w-sm",children:["Your plan includes up to ",r.containers.memoryDescription," of RAM,"," ",r.containers.cpuDescription,", and"," ",r.containers.diskDescription," of Shared Disk."," ",(0,t.jsx)(S.z9,{onClick:o,disabled:l,variant:"underline",children:"Manage your plan."})]})]})},et=()=>{let{workspaceCustomer:e}=(0,O.hA)(),{redirectToBillingPortal:l}=(0,$.B)(),[a,n]=(0,c.useState)(!1),{colorMode:s}=(0,el.DP)(),r=i.subscriptionPlanLimits.hobby,o=async()=>{n(!0),l()};return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 items-center gap-6 md:gap-8 rounded-lg p-6 border border-pink-200 relative overflow-hidden",children:[(0,t.jsx)("img",{alt:"",src:"/billing/chart-".concat("light"===s?"light":"dark",".svg"),className:"absolute bottom-0 left-1/4 hidden lg:flex -z-1"}),(0,t.jsxs)(h.T,{space:1,children:[(0,t.jsx)(m.EY,{children:"Hobby Plan"}),(0,t.jsx)(m.tj,{className:"text-gray-500",children:(null==e?void 0:e.isUsageSubscriber)?"Usage-based subscription":"Credit-based subscription"})]}),(0,t.jsxs)(m.ax,{className:"text-pink-500 max-w-sm",children:["Your plan includes up to ",r.containers.memoryDescription," of RAM,"," ",r.containers.cpuDescription,", and"," ",r.containers.diskDescription," of Shared Disk."," ",(0,t.jsx)(S.z9,{variant:"underline",onClick:o,disabled:a,children:"Manage your Plan"}),"."]})]})},ei=()=>{let{routes:e}=(0,Q.c)(),{colorMode:l}=(0,el.DP)(),a=i.subscriptionPlanLimits.trial;return(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 items-start gap-6 md:gap-8 rounded-lg p-6 border border-pink-200 relative overflow-hidden",children:[(0,t.jsx)("img",{alt:"",src:"/billing/chart-".concat("light"===l?"light":"dark",".svg"),className:"absolute bottom-0 left-1/4 hidden lg:flex"}),(0,t.jsx)(h.T,{space:1,className:"flex-1",children:(0,t.jsx)(m.EY,{children:"Trial Plan"})}),(0,t.jsxs)(h.T,{space:4,className:"flex-1",children:[(0,t.jsxs)(m.xC,{children:["Your plan includes a one-time grant of $",a.includedUsageDollars.toFixed(2)," in credits."," ",a.containers.memoryDescription," of RAM,"," ",a.containers.cpuDescription," and"," ",a.containers.diskDescription," of Disk. Need more?"]}),(0,t.jsx)(S.vx,{size:"sm",...e.workspaceUpgrade({}),name:"Unlock Hobby Plan",children:(0,t.jsxs)(h.z,{space:2,align:"center",children:[(0,t.jsx)(C.In,{icon:_.tXn,className:"text-white"}),(0,t.jsx)(m.ax,{className:"font-medium",children:"Unlock Hobby Plan"})]})})]})]})},en=()=>{let{routes:e}=(0,Q.c)(),{colorMode:l}=(0,el.DP)(),a=i.subscriptionPlanLimits.free;return(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 items-start gap-6 md:gap-8 rounded-lg p-6 border border-pink-200 relative overflow-hidden",children:[(0,t.jsx)("img",{alt:"",src:"/billing/chart-".concat("light"===l?"light":"dark",".svg"),className:"absolute bottom-0 left-1/4 hidden lg:flex"}),(0,t.jsx)(h.T,{space:1,className:"flex-1",children:(0,t.jsx)(m.EY,{children:"Free Plan"})}),(0,t.jsxs)(h.T,{space:4,className:"flex-1",children:[(0,t.jsxs)(m.xC,{children:["Your plan includes a monthly grant of $1.00 in usage."," ",a.containers.memoryDescription," of RAM,"," ",a.containers.cpuDescription," and"," ",a.containers.diskDescription," of Disk. Need more?"]}),(0,t.jsx)(S.vx,{size:"sm",...e.workspaceUpgrade({}),name:"Unlock Hobby Plan",children:(0,t.jsxs)(h.z,{space:2,align:"center",children:[(0,t.jsx)(C.In,{icon:_.tXn,className:"text-white"}),(0,t.jsx)(m.ax,{className:"font-medium",children:"Unlock Hobby Plan"})]})})]})]})},es=e=>{let{text:l,value:a,isLoading:i=!1}=e;return(0,t.jsxs)(h.z,{justify:"between",align:"center",className:"py-2",children:[(0,t.jsx)(m.xC,{children:l}),i?(0,t.jsx)(L.g,{width:40,height:21}):(0,t.jsxs)(m.ax,{className:"tabular-nums",children:["$",a.toFixed(2)]})]})},er=e=>{let{item:l,rate:a,usage:i,total:n}=e;return(0,t.jsxs)("div",{className:"grid grid-cols-6 gap-8",children:[(0,t.jsx)(m.ax,{children:l}),(0,t.jsx)(m.ax,{className:"text-gray-500 col-span-2",children:i}),(0,t.jsx)(m.ax,{className:"text-gray-500 col-span-2",children:a}),(0,t.jsx)(m.ax,{className:"text-right tabular-nums",children:n})]})},eo=e=>{var l,a;let{billingInfo:n}=e,{isHobby:s,isPro:r}=(0,O.hA)(),{customer:o,hasHobbyPlanDiscount:d}=(0,O.mz)(),{currentUsageTotal:u,totalMemGB:p,totalCPU:x,totalEgressGB:g,totalDisk:v,totalBackup:y,numSeats:j,discount:_,currentBill:b}=n,C=(0,c.useMemo)(()=>s&&!d?(0,i.getCouponByName)("Waived hobby plan subscription fee").amount:0,[s,d]),P=null!=(a=null==(l=i.PRODUCTS.Team.newPrice)?void 0:l.cost)?a:i.PRODUCTS.Team.price.cost,U=(0,c.useMemo)(()=>r?i.PRODUCTS.ProPlan.price.cost:0,[r]);return(0,t.jsxs)(h.T,{space:3,className:"mt-6",children:[(0,t.jsx)(m.ax,{className:"font-medium",children:"Bill Breakdown"}),(0,t.jsxs)(h.T,{space:3,children:[(0,t.jsxs)(h.T,{space:3,className:"py-3 px-4 border-t border-b border-gray-100",children:[(0,t.jsx)(er,{item:"Memory",usage:"".concat(p.toFixed(2)," minutely GB"),rate:"$".concat(i.PRICE_MINUTELY_MEM_GB.toFixed(6)," / GB / Minute"),total:"$".concat((p*i.PRICE_MINUTELY_MEM_GB).toFixed(4))}),(0,t.jsx)(er,{item:"CPU",usage:"".concat(x.toFixed(2)," minutely vCPU"),rate:"$".concat(i.PRICE_MINUTELY_VCPU.toFixed(6)," / vCPU / Minute"),total:"$".concat((x*i.PRICE_MINUTELY_VCPU).toFixed(4))}),(0,t.jsx)(er,{item:"Egress",usage:"".concat(g.toFixed(2)," GB"),rate:"$".concat(i.PRICE_EGRESS_GB.toFixed(2)," GB"),total:"$".concat((g*i.PRICE_EGRESS_GB).toFixed(4))}),v>0&&(0,t.jsx)(er,{item:"Volume",usage:"".concat(v.toFixed(2)," minutely GB"),rate:"$".concat(i.PRICE_MINUTELY_DISK_GB.toFixed(6)," / GB / Minute"),total:"$".concat((v*i.PRICE_MINUTELY_DISK_GB).toFixed(4))}),y>0&&(0,t.jsx)(er,{item:"Backup",usage:"".concat(y.toFixed(2)," minutely GB"),rate:"$".concat(i.PRICE_MINUTELY_BACKUP_GB.toFixed(6)," / GB / Minute"),total:"$".concat((y*i.PRICE_MINUTELY_BACKUP_GB).toFixed(4))}),j>0&&(0,t.jsx)(er,{item:"Team",usage:"".concat(j," seats"),rate:"$".concat(P," per seat"),total:"$".concat(j*P)})]}),(0,t.jsxs)(h.T,{space:3,className:"px-4",children:[(0,t.jsxs)(h.z,{justify:"end",align:"center",space:8,children:[(0,t.jsx)(m.ax,{children:"Subtotal"}),(0,t.jsxs)(m.ax,{className:"min-w-20 text-right tabular-nums",children:["$",(u+j*P).toFixed(2)]})]}),_>0&&(0,t.jsxs)(h.z,{justify:"end",align:"center",space:8,children:[(0,t.jsx)(m.ax,{className:"text-pink-500",children:"Included Usage"}),(0,t.jsxs)(m.ax,{className:"text-pink-500 min-w-20 text-right tabular-nums",children:["-$",_.toFixed(2)]})]}),o&&o.creditBalance>0&&(0,t.jsxs)(h.z,{justify:"end",align:"center",space:8,children:[(0,t.jsx)(m.ax,{className:"text-pink-500",children:"Credits Available"}),(0,t.jsxs)(m.ax,{className:"text-pink-500 min-w-20 text-right tabular-nums",children:["-$",o.creditBalance.toFixed(2)]})]}),C>0&&(0,t.jsxs)(h.z,{justify:"end",align:"center",space:8,children:[(0,t.jsx)(m.ax,{className:"text-red-500",children:"Hobby plan fee"}),(0,t.jsxs)(m.ax,{className:"text-red-500 min-w-20 text-right tabular-nums",children:["+$",C.toFixed(2)]})]}),U>0&&(0,t.jsxs)(h.z,{justify:"end",align:"center",space:8,children:[(0,t.jsx)(m.ax,{className:"text-red-500",children:"Pro plan fee"}),(0,t.jsxs)(m.ax,{className:"text-red-500 min-w-20 text-right tabular-nums",children:["+$",U.toFixed(2)]})]}),(0,t.jsxs)(h.z,{justify:"end",align:"center",space:8,className:"bg-secondaryBg py-2 px-4 rounded-md -mx-4",children:[(0,t.jsx)(m.ax,{className:"font-semibold",children:"Current Bill"}),(0,t.jsxs)(m.Bv,{className:"font-semibold min-w-20 text-right tabular-nums",children:["$",b.toFixed(2)]})]})]})]})]})},ec=e=>{let{text:l,value:a,textStyles:i="text-foreground",isLoading:n=!1}=e;return(0,t.jsxs)(h.T,{center:!0,space:2,className:"bg-gray-50 p-5 flex-1 rounded-md h-full",children:[(0,t.jsx)(m.ax,{className:(0,p.xW)("font-medium",i),children:l}),n?(0,t.jsx)(L.g,{width:80,height:38}):(0,t.jsxs)(m.fV,{className:i,children:["$ ",a.toFixed(2)]})]})},ed=e=>{let{billingInfo:l,showBreakdown:a,isLoadingUsage:n}=e,{workspace:s,isPro:r,isHobby:o,isFree:c}=(0,O.hA)(),{customer:d}=(0,O.mz)(),{currentUsageTotal:u,totalMemGB:m,totalCPU:p,totalEgressGB:x,totalDisk:g,totalBackup:v,numSeats:y,discount:j,estimatedBill:_}=l;return(0,t.jsxs)(h.T,{className:"border border-gray-200 p-6 rounded-lg relative",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[(0,t.jsxs)(h.T,{className:"divide-y divide-gray-100 -mt-1.5",children:[(null==s?void 0:s.teamId)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es,{text:"Current Usage",value:u,isLoading:n}),r?(0,t.jsx)(es,{text:"Pro Plan Fee",value:i.PRODUCTS.ProPlan.price.cost}):(0,t.jsx)(es,{text:"".concat(y," Member Seats"),value:y*i.PRODUCTS.Team.price.cost})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es,{text:"Memory Usage",value:m*i.PRICE_MINUTELY_MEM_GB,isLoading:n}),(0,t.jsx)(es,{text:"CPU Usage",value:p*i.PRICE_MINUTELY_VCPU,isLoading:n}),(0,t.jsx)(es,{text:"Egress Usage",value:x*i.PRICE_EGRESS_GB,isLoading:n}),g>.1&&(0,t.jsx)(es,{text:"Volume Usage",value:g*i.PRICE_MINUTELY_DISK_GB,isLoading:n}),v>.1&&(0,t.jsx)(es,{text:"Backup Usage",value:v*i.PRICE_MINUTELY_BACKUP_GB,isLoading:n})]}),(0,t.jsx)(es,{text:"Included Usage",value:j}),d&&(null==d?void 0:d.creditBalance)>0?(0,t.jsx)(es,{text:"Credits Available",value:d.creditBalance}):null]}),(0,t.jsxs)(h.T,{space:4,children:[(0,t.jsxs)(h.z,{space:3,children:[(0,t.jsx)(ec,{text:"Current Usage",value:u,isLoading:n}),r||o||c?(0,t.jsx)(ec,{text:"Estimated Bill",value:_,textStyles:"text-gray-500",isLoading:n}):(0,t.jsx)(ec,{text:"Remaining Usage",value:i.subscriptionPlanLimits.trial.includedUsageDollars-u,isLoading:n})]}),((r||o)&&!(null==d?void 0:d.isPrepaying)||(null==s?void 0:s.teamId))&&(0,t.jsx)(w.T,{currentUsageTotal:u})]})]}),(0,t.jsx)(k.M,{isOpen:a,children:(0,t.jsx)(eo,{billingInfo:l})})]})},eu=e=>{var l,a;let{billingInfo:i,showBreakdown:n}=e,{workspace:s}=(0,O.hA)(),{customer:r}=(0,O.mz)(),{currentUsageTotal:o,estimatedUsageTotal:d,discount:u}=i,{modalActions:m}=(0,b.U)(),p=(0,c.useMemo)(()=>{var e;return d-u-(null!=(e=null==r?void 0:r.creditBalance)?e:0)},[d,u,o,null==r?void 0:r.creditBalance]);return(0,t.jsxs)(h.T,{className:"border border-gray-200 p-6 rounded-lg relative",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[(0,t.jsxs)(h.T,{className:"divide-y divide-gray-100 -mt-1.5",children:[(0,t.jsx)(es,{text:"Current Usage",value:o}),(0,t.jsx)(es,{text:"Discounts",value:u}),(0,t.jsx)(es,{text:"Credits Used",value:null!=(l=null==r?void 0:r.appliedCredits)?l:0}),(0,t.jsx)(es,{text:"Estimated Month's Cost",value:Math.max(0,d-u-o)})]}),(0,t.jsxs)(h.T,{space:4,children:[(0,t.jsxs)(h.z,{space:3,children:[(0,t.jsx)(ec,{text:"Credits Available",value:null!=(a=null==r?void 0:r.creditBalance)?a:0}),(0,t.jsx)(ec,{text:"Est Credits Required",value:Math.max(0,p),textStyles:p<=0?"text-green-500":"text-red-500"})]}),(null==r?void 0:r.isPrepaying)?(0,t.jsx)(S.$n,{icon:_.f5w,disabled:!s,onClick:()=>{m.openModal((0,t.jsx)(J,{}))},children:"Purchase Credits"}):null]})]}),(0,t.jsx)(k.M,{isOpen:n,children:(0,t.jsx)(eo,{billingInfo:i})})]})},em=e=>{let{billingInfo:l,isLoadingUsage:a}=e,{customer:n}=(0,O.mz)(),{currentUsageTotal:r,totalMemGB:o,totalCPU:d,totalEgressGB:u,totalDisk:m,totalBackup:p,billingPeriod:x}=l,g=(0,c.useMemo)(()=>{var e;return(null!=(e=null==n?void 0:n.invoices.filter(e=>s()(x.end).isSame(e.periodEnd,"month")))?e:[]).reduce((e,l)=>e+l.amountPaid,0)/100},[null==n?void 0:n.invoices,x]);return(0,t.jsx)(h.T,{space:6,className:"border border-gray-200 p-6 rounded-lg relative",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[(0,t.jsxs)(h.T,{className:"divide-y divide-gray-100 -mt-1.5",children:[(0,t.jsx)(es,{text:"Memory Usage",value:o*i.PRICE_MINUTELY_MEM_GB,isLoading:a}),(0,t.jsx)(es,{text:"CPU Usage",value:d*i.PRICE_MINUTELY_VCPU,isLoading:a}),(0,t.jsx)(es,{text:"Egress Usage",value:u*i.PRICE_EGRESS_GB,isLoading:a}),(0,t.jsx)(es,{text:"Volume Usage",value:m*i.PRICE_MINUTELY_DISK_GB,isLoading:a}),p>0?(0,t.jsx)(es,{text:"Backup Usage",value:p*i.PRICE_MINUTELY_BACKUP_GB,isLoading:a}):null]}),(0,t.jsxs)(h.z,{space:3,children:[(0,t.jsx)(ec,{text:"Total Usage",value:r,isLoading:a}),(0,t.jsx)(ec,{text:"Total Bill",value:g})]})]})})},eh=e=>{var l;let[a,i]=(0,c.useState)(!1),{workspace:n,workspaceCustomer:r,isPro:o,isHobby:d,isFree:u}=(0,O.hA)(),{usageSubscription:p,customer:x}=(0,O.mz)(),g=(0,ee.t)({teamId:null!=(l=null==n?void 0:n.teamId)?l:void 0,billingPeriod:e.billingPeriod}),{currentUsage:v,estimatedUsage:y}=g,j=g.result,b=g.projectUsages,P=(0,X.N)({subscription:p,billingPeriod:e.billingPeriod,currentUsage:v,estimatedUsage:y}),U=(0,c.useMemo)(()=>P.isPreviousMonth?"".concat(s()(e.billingPeriod.start).format("MMM D")," - ").concat(s()(e.billingPeriod.end).format("MMM D")," Bill"):"".concat(s()(e.billingPeriod.start).format("MMM DD")," to ").concat(s()(e.billingPeriod.end).format("MMM DD")," ").concat((null==r?void 0:r.isUsageSubscriber)?"Usage":"Credit Usage"),[P.isPreviousMonth,r,e.billingPeriod]);return(0,t.jsxs)(h.T,{space:8,children:[(0,t.jsxs)(h.z,{align:"baseline",justify:"between",space:4,children:[(0,t.jsx)(m.f_,{as:"h1",children:U}),(0,t.jsx)(h.z,{align:"baseline",space:4,children:o||d?(0,t.jsx)(S.z9,{onClick:()=>i(!a),className:"hidden md:block",children:(0,t.jsxs)(h.z,{align:"center",space:1,children:[(0,t.jsx)(C.In,{icon:a?_.uGo:_.B8B,size:"sm",className:"text-pink-700"}),(0,t.jsxs)(m.ax,{className:"text-pink-700 font-medium",children:[a?"Hide":"Show"," Breakdown"]})]})}):null})]}),(0,t.jsxs)(h.T,{space:4,children:[P.isPreviousMonth?(0,t.jsx)(em,{billingInfo:P,isLoadingUsage:j.isLoading}):(null==r?void 0:r.isUsageSubscriber)&&!(null==r?void 0:r.isPrepaying)?(0,t.jsx)(ed,{billingInfo:P,showBreakdown:a,isLoadingUsage:j.isLoading}):(0,t.jsx)(eu,{billingInfo:P,showBreakdown:a,isLoadingUsage:j.isLoading}),(0,t.jsxs)(h.T,{space:12,children:[(0,t.jsx)(t.Fragment,{children:o?(0,t.jsx)(ea,{}):d?(0,t.jsx)(et,{}):u?(0,t.jsx)(en,{}):(0,t.jsx)(ei,{})}),(0,t.jsxs)(h.T,{space:8,children:[(0,t.jsx)(m.f_,{as:"h2",children:"Usage by Project"}),j.isFetched?(0,t.jsx)(M,{result:j,projectUsages:b,numProjects:null==n?void 0:n.projects.length,...e}):(0,t.jsx)(T.m6,{})]})]})]})]})},ep=()=>{let{workspace:e,isPro:l,isHobby:a,workspaceCustomer:i}=(0,O.hA)(),[{user:n}]=(0,q.Jd)(),[r,o]=(0,c.useState)({start:l||a||null==n?i?new Date(i.billingPeriod.start):new Date:new Date(n.createdAt),end:i?new Date(i.billingPeriod.end):new Date}),d=(0,c.useMemo)(()=>r.end<new Date,[r]),m=(0,c.useMemo)(()=>{var l;return(null!=n||(null==e?void 0:e.teamId)!=null)&&s()(null!=(l=null==e?void 0:e.createdAt)?l:null==n?void 0:n.createdAt).utc().format("YYYY-MM")===s()(r.start).utc().format("YYYY-MM")},[r,n,e]),h={billingPeriod:r,setBillingPeriod:o,isPreviousMonth:d,isFirstMonth:m};return(0,t.jsx)(D.P,{title:"Usage",ActionComponent:()=>(0,t.jsx)(u.a,{...h,currentBillingPeriod:{start:i?new Date(i.billingPeriod.start):new Date,end:i?new Date(i.billingPeriod.end):new Date}}),children:(0,t.jsx)(eh,{...h})})},ex=()=>{let{isLoading:e}=(0,O.hA)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.k,{title:"Usage"}),e?null:(0,t.jsx)(ep,{})]})},eg=ex;ex.getLayout=R.u,ex.requireAuthentication=!0},56757:(e,l,a)=>{a.d(l,{O:()=>i});var t=a(75676);let i=()=>{let e=(0,t.useStripe)(),l=(0,t.useElements)();return{getPaymentMethodFromCardElement:async()=>{let a=null==l?void 0:l.getElement(t.CardElement);if(null==e||null==a)return null;let i=null==l?void 0:l.getElement(t.AddressElement),n=null;try{var s;n=null==(s=await (null==i?void 0:i.getValue()))?void 0:s.value}catch(e){}let{paymentMethod:r,error:o}=await e.createPaymentMethod({type:"card",card:a,billing_details:"object"==typeof n&&null!==n?{name:null==n?void 0:n.name,address:null==n?void 0:n.address}:void 0});return{paymentMethod:r,error:o}},handlePaymentIntentThatRequiresCustomerAction:async l=>{let{paymentIntent:a}=l;if(null==e)throw Error("Failed to load payment processor");if(null==a)throw Error("Failed to create payment for invoice");if(!a.status.startsWith("requires_"))return;let t=await e.confirmCardPayment(a.client_secret);if(t.error){var i;throw Error(null!=(i=t.error.message)?i:"Your card was declined")}}}}},59641:(e,l,a)=>{a.d(l,{r:()=>t});let t=e=>{try{let l=Array.from(e.matchAll(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\).*/gm))[0],a=parseInt(l[1]),t=parseInt(l[2]),i=parseInt(l[3]);i/=100;let n=t*Math.min(i,1-i)/100,s=e=>{let l=(e+a/30)%12,t=i-n*Math.max(Math.min(l-3,9-l,1),-1);return Math.round(255*t).toString(16).padStart(2,"0")};return"#".concat(s(0)).concat(s(8)).concat(s(4))}catch(l){return e}}},64657:(e,l,a)=>{a.d(l,{T:()=>C});var t=a(50979),i=a(25963),n=a(73648),s=a(2551),r=a(77505),o=a(86337),c=a(36609),d=a(31754),u=a(95662),m=a(42419),h=a(4766),p=a(90029),x=a(25508),g=a(55850),v=a(72898),y=a(61259),j=a(86954),_=a(88887);let b=e=>{var l,a;let{customerId:n,usageLimit:o,onUpdate:c}=e,{modalActions:b}=(0,r.U)(),{usageLimitActions:C}=(e=>{let{customerId:l}=e,{graphqlClient:a}=(0,g.q)(),t=["workspace"];return{usageLimitActions:{setUsageLimit:(0,v.n)(t,async e=>(await a.usageLimitSet(e),!0)),removeUsageLimit:(0,v.n)(t,async e=>(await a.usageLimitRemove(e),!0))}}})({customerId:n}),[P,U]=(0,i.useState)(null!=(l=null==o?void 0:o.hardLimit)?l:null),[f,M]=(0,i.useState)(null!=(a=null==o?void 0:o.softLimit)?a:null),[E,N]=(0,i.useState)(!1),[I,B]=(0,x.b)(),w=async()=>{if(null!=f){N(!0);try{await C.setUsageLimit({input:{customerId:n,hardLimitDollars:P,softLimitDollars:f}}),c(),b.createToast((0,t.jsx)(_.y8,{variant:"success",title:"Success",description:"Your usage limit was updated!"})),b.exitModal()}catch(e){B(e.message)}N(!1)}},S=async()=>{N(!0);try{await C.removeUsageLimit({input:{customerId:n}}),c(),b.createToast((0,t.jsx)(_.y8,{variant:"success",title:"Success",description:"Your usage limit was removed!"})),b.exitModal()}catch(e){B(e.message)}N(!1)};return(0,t.jsx)(p.aF,{title:"Usage Limits",children:(0,t.jsxs)(y.lV,{className:"space-y-8",onSubmit:w,children:[(0,t.jsx)(p.wt,{children:"Usage limits"}),(0,t.jsxs)(u.T,{space:3,children:[(0,t.jsx)(m.ax,{className:"font-semibold",children:"Hard limit"}),(0,t.jsx)(m.xC,{children:"When your usage reaches this amount, we will shut down ALL your resources to prevent further charges."}),(0,t.jsx)(j.pd,{type:"number",label:{text:"Hard limit",hidden:!0},placeholder:"150",min:h.MIN_HARD_USAGE_LIMIT_DOLLARS,max:h.MAX_USAGE_LIMIT_DOLLARS,defaultValue:null!=P?P:void 0,onChange:e=>U(Number(e.target.value)),icon:s.G9t})]}),(0,t.jsxs)(u.T,{space:3,children:[(0,t.jsx)(m.ax,{className:"font-semibold",children:"Custom email alert"}),(0,t.jsx)(m.xC,{children:"You will receive an email notification when this limit is hit."}),(0,t.jsx)(j.pd,{type:"number",label:{text:"Soft limit",hidden:!0},placeholder:"25",min:h.MIN_SOFT_USAGE_LIMIT_DOLLARS,max:h.MAX_USAGE_LIMIT_DOLLARS,defaultValue:null!=f?f:void 0,onChange:e=>M(Number(e.target.value)),icon:s.G9t,required:!0})]}),null!=I&&(0,t.jsx)(m.yn,{children:I}),(0,t.jsxs)(u.z,{align:"center",justify:null==o?"end":"between",children:[null!=o&&(0,t.jsx)(d.$n,{variant:"ghost",color:"red",type:"button",className:"font-medium",onClick:S,children:"Remove limits"}),(0,t.jsxs)(u.z,{align:"center",space:4,children:[(0,t.jsx)(d.$n,{type:"button",variant:"outline",color:"gray",onClick:()=>b.exitModal(),children:"Cancel"}),(0,t.jsx)(d.$n,{type:"submit",disabled:null==f||E,children:"Save limit"})]})]})]})})},C=e=>{let{currentUsageTotal:l,onlyShowIfOverLimit:a=!1}=e,{workspaceCustomer:h}=(0,n.hA)(),{invalidateWorkspace:p}=(0,o.iS)(),{modalActions:x}=(0,r.U)(),{isNearingLimit:g,isOverLimit:v,percentageUsed:y}=(0,i.useMemo)(()=>{let e=!1,a=!1;if((null==h?void 0:h.usageLimit)==null||(null==h?void 0:h.usageLimit.hardLimit)==null)return{isNearingLimit:e,isOverLimit:a,percentageUsed:0};let t=null==h?void 0:h.usageLimit.hardLimit;return t&&l<t&&l>=.75*t&&(e=!0),t&&l>=t&&(a=!0),{isNearingLimit:e,isOverLimit:a,percentageUsed:t?l/t*100:0}},[null==h?void 0:h.usageLimit,l]),j=()=>{h&&x.openModal((0,t.jsx)(b,{customerId:h.id,usageLimit:h.usageLimit,onUpdate:p}))};return(null==h?void 0:h.usageLimit)==null||(null==h?void 0:h.usageLimit.hardLimit)==null?a?null:(0,t.jsxs)(d.$n,{variant:"outline",color:"gray",onClick:j,children:[(null==h?void 0:h.usageLimit)==null?"Set":"Update"," usage limits"]}):!a||g||v?(0,t.jsxs)(u.T,{space:2,children:[(0,t.jsxs)(u.z,{justify:"between",align:"center",children:[(0,t.jsxs)(u.z,{space:1,align:"center",children:[(0,t.jsx)(m.ax,{className:"font-semibold",children:"Limit"}),(0,t.jsx)(d.K0,{title:"Edit usage limit",iconStyles:"text-gray-500",size:"xs",icon:s.Pt,onClick:j})]}),(0,t.jsxs)(m.tj,{className:"text-gray-500",children:[l.toFixed(2)," / ",null==h?void 0:h.usageLimit.hardLimit," USD"]})]}),(0,t.jsx)("div",{className:(0,c.xW)("h-2 w-full bg-gray-100 rounded-lg"),children:(0,t.jsx)("div",{className:(0,c.xW)("h-full rounded-lg",g||v?"bg-red-500":"bg-pink-500"),style:{width:"".concat(y>100?100:y,"%")}})}),g&&(0,t.jsx)(m.tj,{className:"text-red-500",children:"Nearing usage limit. Update limit to keep your services running."}),v&&(0,t.jsxs)(m.tj,{className:"text-red-500",children:[(0,t.jsx)("strong",{children:"All deployments are paused."})," Update limit to resume your services or wait until the next billing cycle."]})]}):null}},69152:(e,l,a)=>{a.d(l,{G:()=>t});let t=/^\d+$/},71310:(e,l,a)=>{a.d(l,{N:()=>u});var t=a(4766),i=a(25963),n=a(11768),s=a.n(n),r=a(94702),o=a(50253),c=a.n(o),d=a(73648);c().extend(s());let u=e=>{var l;let{subscription:a,currentUsage:n,estimatedUsage:s,billingPeriod:o}=e,{isHobby:c,isPro:u}=(0,d.hA)(),{customer:m,hasHobbyPlanDiscount:h}=(0,d.mz)(),p=(0,i.useMemo)(()=>o.end<new Date,[o]),x=(0,i.useMemo)(()=>null==m?void 0:m.invoices.find(e=>null!=e.subscriptionId&&e.subscriptionId===(null==a?void 0:a.id)&&(0,r.ZQ)(o.end)===(0,r.ZQ)(e.periodEnd)),[null==m?void 0:m.invoices,o]),g=(0,i.useMemo)(()=>{var e,l,i;return null!=(i=p&&null!=x?null==(e=x.items.find(e=>e.productId===t.PRODUCTS.Team.id))?void 0:e.quantity:null==a||null==(l=a.items.find(e=>e.productId===t.PRODUCTS.Team.id))?void 0:l.quantity)?i:0},[null==a?void 0:a.items,x,p]),v=(0,i.useMemo)(()=>{var e,l,a,i,n,s;if(null==x)return null;let r=x.items.find(e=>e.productId===t.PRODUCTS.Memory.id),o=x.items.find(e=>e.productId===t.PRODUCTS.CPU.id),c=x.items.find(e=>e.productId===t.PRODUCTS.Network.id),d=(0,t.megaBytesInGigaByte)(1);return{totalMemGB:(null!=(e=null==r?void 0:r.quantity)?e:0)/d,estimatedMemGB:(null!=(l=null==r?void 0:r.quantity)?l:0)/d,totalCPU:(null!=(a=null==o?void 0:o.quantity)?a:0)/100,estimatedCPU:(null!=(i=null==o?void 0:o.quantity)?i:0)/100,totalEgressGB:(null!=(n=null==c?void 0:c.quantity)?n:0)/d,estimatedEgressGB:(null!=(s=null==c?void 0:c.quantity)?s:0)/d,totalDisk:0,totalBackup:0,estimatedDisk:0,estimatedBackup:0}},[x]),y=(e=>{let{currentUsage:l,estimatedUsage:a}=e,n=(0,i.useMemo)(()=>{let e=l.memoryUsageGB*t.PRICE_MINUTELY_MEM_GB,a=l.cpuPercentvCPU*t.PRICE_MINUTELY_VCPU,i=l.diskGB*t.PRICE_MINUTELY_DISK_GB,n=l.backupGB*t.PRICE_MINUTELY_BACKUP_GB;return e+a+i+l.egressGB*t.PRICE_EGRESS_GB+n},[l]),s=(0,i.useMemo)(()=>{let e=a.memoryUsageGB*t.PRICE_MINUTELY_MEM_GB,l=a.cpuPercentvCPU*t.PRICE_MINUTELY_VCPU,i=a.diskGB*t.PRICE_MINUTELY_DISK_GB,n=a.backupGB*t.PRICE_MINUTELY_BACKUP_GB;return e+l+i+a.egressGB*t.PRICE_EGRESS_GB+n},[a]);return{totalMemGB:l.memoryUsageGB,totalCPU:l.cpuPercentvCPU,totalDisk:l.diskGB,totalBackup:l.backupGB,totalEgressGB:l.egressGB,estimatedMemGB:a.memoryUsageGB,estimatedCPU:a.cpuPercentvCPU,estimatedDisk:a.diskGB,estimatedBackup:a.backupGB,estimatedEgressGB:a.egressGB,currentTotal:n,estimatedTotal:s}})({currentUsage:n,estimatedUsage:s}),{totalMemGB:j,totalCPU:_,totalDisk:b,totalBackup:C,totalEgressGB:P,estimatedMemGB:U,estimatedCPU:f,estimatedDisk:M,estimatedBackup:E,estimatedEgressGB:N}=(0,i.useMemo)(()=>p&&null!=v?v:y,[p,v,y]),I=(0,i.useMemo)(()=>c?t.HOBBY_PLAN_INCLUDED_USAGE:u?t.PRO_PLAN_INCLUDED_USAGE:0,[c,u]),{currentUsageTotal:B,estimatedUsageTotal:w}=(0,i.useMemo)(()=>({currentUsageTotal:j*t.PRICE_MINUTELY_MEM_GB+_*t.PRICE_MINUTELY_VCPU+b*t.PRICE_MINUTELY_DISK_GB+C*t.PRICE_MINUTELY_BACKUP_GB+P*t.PRICE_EGRESS_GB,estimatedUsageTotal:U*t.PRICE_MINUTELY_MEM_GB+f*t.PRICE_MINUTELY_VCPU+M*t.PRICE_MINUTELY_DISK_GB+E*t.PRICE_MINUTELY_BACKUP_GB+N*t.PRICE_EGRESS_GB}),[j,_,b,C,P,U,f,M,E,N]),{currentBill:S,estimatedBill:T}=(0,i.useMemo)(()=>{var e;let l=Math.max(0,B-I),a=Math.max(0,w-I),i=(0,t.getCouponByName)("Waived hobby plan subscription fee").amount;l+=c&&!h?i:0,a+=c&&!h?i:0;let n=u?t.PRODUCTS.ProPlan.price.cost:0;l+=n,a+=n;let s=null!=(e=null==m?void 0:m.creditBalance)?e:0;return{currentBill:l=Math.max(0,l-s),estimatedBill:a=Math.max(0,a-s)}},[B,w,g,I,null==m?void 0:m.creditBalance,c,h,u]);return{usageBalance:Math.max(0,null!=(l=null==m?void 0:m.remainingUsageCreditBalance)?l:0),totalMemGB:j,totalCPU:_,totalDisk:b,totalBackup:C,totalEgressGB:P,estimatedMemGB:U,estimatedCPU:f,estimatedDisk:M,estimatedBackup:E,estimatedEgressGB:N,numSeats:g,currentUsageTotal:B,estimatedUsageTotal:w,currentBill:S,estimatedBill:T,discount:I,isPreviousMonth:p,billingPeriod:o,currentInvoice:x}}},74206:(e,l,a)=>{a.d(l,{F:()=>o});var t=a(50979),i=a(25963),n=a(86954),s=a(80430);let r=[{value:"ad_nrt",locality:"Andorra",placeholder:"A-123456-Z"},{value:"ae_trn",locality:"United Arab Emirates",placeholder:"123456789012345"},{value:"al_tin",locality:"Albania",placeholder:"J12345678N"},{value:"am_tin",locality:"Armenia",placeholder:"02538904"},{value:"ao_tin",locality:"Angola",placeholder:"5123456789"},{value:"ar_cuit",locality:"Argentina",placeholder:"12-3456789-01"},{value:"au_abn",locality:"Australia",placeholder:"12345678912"},{value:"au_arn",locality:"Australia",placeholder:"123456789123"},{value:"aw_tin",locality:"Aruba",placeholder:"12345678"},{value:"az_tin",locality:"Azerbaijan",placeholder:"0123456789"},{value:"ba_tin",locality:"Bosnia and Herzegovina",placeholder:"123456789012"},{value:"bb_tin",locality:"Barbados",placeholder:"1123456789012"},{value:"bd_bin",locality:"Bangladesh",placeholder:"123456789-0123"},{value:"bf_ifu",locality:"Burkina Faso",placeholder:"12345678A"},{value:"bg_uic",locality:"Bulgaria",placeholder:"123456789"},{value:"bh_vat",locality:"Bahrain",placeholder:"123456789012345"},{value:"bj_ifu",locality:"Benin",placeholder:"1234567890123"},{value:"bo_tin",locality:"Bolivia",placeholder:"123456789"},{value:"br_cnpj",locality:"Brazil",placeholder:"01.234.456/5432-10"},{value:"br_cpf",locality:"Brazil",placeholder:"123.456.789-87"},{value:"bs_tin",locality:"Bahamas",placeholder:"123.456.789"},{value:"by_tin",locality:"Belarus",placeholder:"123456789"},{value:"ca_bn",locality:"Canada",placeholder:"123456789"},{value:"ca_gst_hst",locality:"Canada",placeholder:"123456789RT0002"},{value:"ca_pst_bc",locality:"Canada (British Columbia)",placeholder:"PST-1234-5678"},{value:"ca_pst_mb",locality:"Canada (Manitoba)",placeholder:"123456-7"},{value:"ca_pst_sk",locality:"Canada (Saskatchewan)",placeholder:"1234567"},{value:"ca_qst",locality:"Canada (Qu\xe9bec)",placeholder:"1234567890TQ1234"},{value:"cd_nif",locality:"Congo (DR)",placeholder:"A0123456M"},{value:"ch_uid",locality:"Switzerland",placeholder:"CHE-123.456.789 HR"},{value:"ch_vat",locality:"Switzerland",placeholder:"CHE-123.456.789 MWST"},{value:"cl_tin",locality:"Chile",placeholder:"12.345.678-K"},{value:"cm_niu",locality:"Cameroon",placeholder:"M123456789000L"},{value:"cn_tin",locality:"China",placeholder:"123456789012345678"},{value:"co_nit",locality:"Colombia",placeholder:"123.456.789-0"},{value:"cr_tin",locality:"Costa Rica",placeholder:"1-234-567890"},{value:"cv_nif",locality:"Cape Verde",placeholder:"213456789"},{value:"de_stn",locality:"Germany",placeholder:"1234567890"},{value:"do_rcn",locality:"Dominican Republic",placeholder:"123-4567890-1"},{value:"ec_ruc",locality:"Ecuador",placeholder:"1234567890001"},{value:"eg_tin",locality:"Egypt",placeholder:"123456789"},{value:"es_cif",locality:"Spain",placeholder:"A12345678"},{value:"et_tin",locality:"Ethiopia",placeholder:"1234567890"},{value:"eu_oss_vat",locality:"EU",placeholder:"EU123456789"},{value:"eu_vat",locality:"European Union",placeholder:"DE123456789"},{value:"gb_vat",locality:"United Kingdom",placeholder:"GB123456789"},{value:"ge_vat",locality:"Georgia",placeholder:"123456789"},{value:"gn_nif",locality:"Guinea",placeholder:"123456789"},{value:"hk_br",locality:"Hong Kong",placeholder:"12345678"},{value:"hr_oib",locality:"Croatia",placeholder:"12345678901"},{value:"hu_tin",locality:"Hungary",placeholder:"12345678-1-23"},{value:"id_npwp",locality:"Indonesia",placeholder:"012.345.678.9-012.345"},{value:"il_vat",locality:"Israel",placeholder:"000012345"},{value:"in_gst",locality:"India",placeholder:"12ABCDE3456FGZH"},{value:"is_vat",locality:"Iceland",placeholder:"123456"},{value:"jp_cn",locality:"Japan",placeholder:"1234567891234"},{value:"jp_rn",locality:"Japan",placeholder:"12345"},{value:"jp_trn",locality:"Japan",placeholder:"T1234567891234"},{value:"ke_pin",locality:"Kenya",placeholder:"P000111111A"},{value:"kg_tin",locality:"Kyrgyzstan",placeholder:"12345678901234"},{value:"kh_tin",locality:"Cambodia",placeholder:"1001-123456789"},{value:"kr_brn",locality:"South Korea",placeholder:"123-45-67890"},{value:"kz_bin",locality:"Kazakhstan",placeholder:"123456789012"},{value:"la_tin",locality:"Laos",placeholder:"123456789-000"},{value:"li_uid",locality:"Liechtenstein",placeholder:"CHE123456789"},{value:"li_vat",locality:"Liechtenstein",placeholder:"12345"},{value:"ma_vat",locality:"Morocco",placeholder:"12345678"},{value:"md_vat",locality:"Moldova",placeholder:"1234567"},{value:"me_pib",locality:"Montenegro",placeholder:"12345678"},{value:"mk_vat",locality:"North Macedonia",placeholder:"MK1234567890123"},{value:"mr_nif",locality:"Mauritania",placeholder:"12345678"},{value:"mx_rfc",locality:"Mexico",placeholder:"ABC010203AB9"},{value:"my_frp",locality:"Malaysia",placeholder:"12345678"},{value:"my_itn",locality:"Malaysia",placeholder:"C 1234567890"},{value:"my_sst",locality:"Malaysia",placeholder:"A12-3456-78912345"},{value:"ng_tin",locality:"Nigeria",placeholder:"12345678-0001"},{value:"no_vat",locality:"Norway",placeholder:"123456789MVA"},{value:"no_voec",locality:"Norway",placeholder:"1234567"},{value:"np_pan",locality:"Nepal",placeholder:"123456789"},{value:"nz_gst",locality:"New Zealand",placeholder:"123456789"},{value:"om_vat",locality:"Oman",placeholder:"OM1234567890"},{value:"pe_ruc",locality:"Peru",placeholder:"12345678901"},{value:"ph_tin",locality:"Philippines",placeholder:"123456789012"},{value:"ro_tin",locality:"Romania",placeholder:"1234567890123"},{value:"rs_pib",locality:"Serbia",placeholder:"123456789"},{value:"ru_inn",locality:"Russia",placeholder:"1234567891"},{value:"ru_kpp",locality:"Russia",placeholder:"123456789"},{value:"sa_vat",locality:"Saudi Arabia",placeholder:"123456789012345"},{value:"sg_gst",locality:"Singapore",placeholder:"M12345678X"},{value:"sg_uen",locality:"Singapore",placeholder:"123456789F"},{value:"si_tin",locality:"Slovenia",placeholder:"12345678"},{value:"sn_ninea",locality:"Senegal",placeholder:"12345672A2"},{value:"sr_fin",locality:"Suriname",placeholder:"1234567890"},{value:"sv_nit",locality:"El Salvador",placeholder:"1234-567890-123-4"},{value:"th_vat",locality:"Thailand",placeholder:"1234567891234"},{value:"tj_tin",locality:"Tajikistan",placeholder:"123456789"},{value:"tr_tin",locality:"Turkey",placeholder:"0123456789"},{value:"tw_vat",locality:"Taiwan",placeholder:"12345678"},{value:"tz_vat",locality:"Tanzania",placeholder:"12345678A"},{value:"ua_vat",locality:"Ukraine",placeholder:"123456789"},{value:"ug_tin",locality:"Uganda",placeholder:"1014751879"},{value:"us_ein",locality:"United States",placeholder:"12-3456789"},{value:"uy_ruc",locality:"Uruguay",placeholder:"123456789012"},{value:"uz_tin",locality:"Uzbekistan",placeholder:"123456789"},{value:"uz_vat",locality:"Uzbekistan",placeholder:"123456789012"},{value:"ve_rif",locality:"Venezuela",placeholder:"A-12345678-9"},{value:"vn_tin",locality:"Vietnam",placeholder:"1234567890"},{value:"za_vat",locality:"South Africa",placeholder:"4123456789"},{value:"zm_tin",locality:"Zambia",placeholder:"1004751879"},{value:"zw_tin",locality:"Zimbabwe",placeholder:"1234567890"}];function o(e){let{value:l="",type:a="eu_vat",onChange:o}=e,[c,d]=(0,i.useState)(a),[u,m]=(0,i.useState)(l);(0,i.useEffect)(()=>{u&&c?o({type:c,value:u}):o(null)},[u,c]);let h=r.find(e=>e.value===c);return(0,t.jsxs)("div",{className:"border h-10 focus-within:border-pink-500 rounded-md flex w-full items-center",children:[(0,t.jsx)(s.l,{value:c,label:{text:"Tax ID Type",hidden:!0},onChange:e=>d(e),options:[...r.map(e=>{let{value:l,locality:a}=e;return{value:l,text:l.replaceAll("_"," ").toUpperCase()}})],selectStyles:"border-transparent border-r-neutral rounded-r-none rounded-l-md !h-[38px] w-[120px]"}),(0,t.jsx)(n.pd,{type:"text",label:{text:"Tax ID",hidden:!0},placeholder:(null==h?void 0:h.placeholder)||"Enter tax ID",value:u,autoFocus:!0,onChange:e=>m(e.target.value),className:"h-full !border-transparent"})]})}}}]);