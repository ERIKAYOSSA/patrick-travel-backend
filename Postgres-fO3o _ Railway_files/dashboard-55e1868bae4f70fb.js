(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9724],{21512:(e,l,t)=>{"use strict";t.d(l,{Hl:()=>g,Q5:()=>h,s6:()=>x});var a=t(25963),r=t(22986),s=t(45588),n=t(97865),i=t(72898),o=t(55850),d=t(45479),c=t(5979),u=t(66800),m=t.n(u);let x=[{value:d.acM.Admin,text:"Admin"},{value:d.acM.Member,text:"Member"},{value:d.acM.Viewer,text:"Deployer"}],h=e=>{let[{user:l}]=(0,s.Jd)(),{graphqlClient:t}=(0,o.q)(),c=["team",e,"members",null==l?void 0:l.id],u=(0,r.useRouter)(),{result:x,setQuery:h}=(0,n.W)(c,async()=>{if(l&&!e)return[{id:l.id,role:d.acM.Admin,featureFlags:l.featureFlags,name:l.name,email:l.email,avatar:l.avatar}];if(e)return(await t.teamMembers({id:e})).team.members;throw Error("userId and teamId not defined")},{staleTime:m()("30s"),enabled:u.isReady}),g=(0,a.useMemo)(()=>{var e,t,a;return null!=(a=null==(t=x.data)||null==(e=t.find(e=>e.id===(null==l?void 0:l.id)))?void 0:e.role)?a:null},[x.data,l]),p=(0,i.n)(c,async a=>{let{userId:r,role:s}=a;null!=l&&null!=e&&null!=x.data&&(h(x.data.map(e=>e.id===r?{...e,role:s}:e)),await t.teamPermissionChange({input:{teamId:e,userId:r,role:s}}))}),j=(0,i.n)(c,async a=>{null!=l&&null!=e&&null!=x.data&&(h(x.data.filter(e=>e.id!==a)),await t.teamUserRemove({id:e,input:{userId:a}}))});return{teamMembers:x,currentRole:g,teamMemberActions:{changeTeamPermission:p,removeUserFromTeam:j}}},g=e=>{let{graphqlClient:l}=(0,o.q)(),t=["team",e,"trustedDomains"],{result:a,setQuery:r}=(0,n.W)(t,async()=>{if(null==e)throw Error("teamId not defined");return(0,c.nX)(await l.teamTrustedDomains({teamId:e})).teamTrustedDomains},{enabled:null!=e});return{teamTrustedDomains:a,teamTrustedDomainActions:{createTeamTrustedDomain:(0,i.n)(t,async t=>{if(null==e)throw Error("teamId not defined");return await l.createTeamTrustedDomain({input:{...t,teamId:e}}),!0}),deleteTeamTrustedDomain:(0,i.n)(t,async t=>{let{id:a}=t;if(null==e)throw Error("teamId not defined");return await l.deleteTeamTrustedDomain({id:a}),!0})}}}},31736:(e,l,t)=>{"use strict";t.d(l,{n:()=>d});var a=t(66800),r=t.n(a),s=t(97865),n=t(55850),i=t(72898),o=t(73648);let d=()=>{var e,l,t,a;let{graphqlClient:d}=(0,n.q)(),{workspace:c}=(0,o.hA)(),u=null==c?void 0:c.customerId,{result:m,queryKey:x}=(0,s.W)(["referral-info",null==c?void 0:c.id,u],async()=>{if(null==c||null==u)throw Error("Workspace or customer ID is null");return await d.referralInfo({workspaceId:c.id,customerId:u})},{enabled:null!=c&&null!=u,staleTime:r()("5m")}),h=(0,i.n)(x,async e=>{c&&await d.referralInfoUpdate({input:{...e.input,workspaceId:c.id}})});return{isReferralInfoLoading:m.isLoading,referralInfo:null!=(t=null==(e=m.data)?void 0:e.referralInfo)?t:null,totalReferralPayouts:null!=(a=null==(l=m.data)?void 0:l.referralPayoutsTotal)?a:0,referralInfoActions:{referralInfoUpdate:h}}}},33242:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>eg});var a=t(50979),r=t(25963),s=t(97865),n=t(55850),i=t(26447),o=t(73648),d=t(75749),c=t(95662),u=t(7776),m=t(30843),x=t(59102),h=t(70375),g=t(30595);let p=[],j=()=>{let{proPlanBanners:e}=(()=>{let[e,l]=(0,g.A)("@railway/proPlanBanners",{defaultValue:{}});return{proPlanBanners:e,setBannerAsSeen:e=>{l(l=>({...l,[e]:!0}))}}})(),l=(0,r.useMemo)(()=>p.find(l=>{let{key:t}=l;return null==e[t]}),[e]);return null==l?null:l.banner({})};var v=t(82660),f=t(45588),y=t(42419),w=t(70336),b=t(80374),N=t(47654),k=t(36609);let I=e=>{let{title:l,text:t,cta:r,link:s,isLimitedTrial:n}=e;return(0,a.jsxs)("div",{className:"w-full flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{className:(0,k.xW)("flex flex-col xs:flex-row xs:items-center gap-y-2 justify-between sm:justify-start","gap-x-2"),children:[(0,a.jsxs)(c.z,{space:2,children:[(0,a.jsx)(y.ax,{className:"font-semibold",children:l}),(0,a.jsx)(y.ax,{className:"opacity-50",children:"|"})]}),n?(0,a.jsxs)(c.T,{children:[(0,a.jsx)(y.ax,{className:"font-semibold",children:"Limited Trial"}),(0,a.jsx)(y.ax,{children:t})]}):(0,a.jsx)(y.ax,{children:t})]}),(0,a.jsx)(c.z,{align:"center",space:4,children:(0,a.jsx)(N.N,{href:s,className:"text-sm font-semibold",children:r})})]})},L=e=>{let{user:l,githubInfo:t}=e,{routes:r}=(0,h.c)(),{credits:s,isLoading:n}=(0,w.VA)({user:l});if(n)return null;let i="$".concat(s.remaining.toFixed(2)),o=s.daysRemaining+" "+(0,b.td)("day",s.daysRemaining);return(0,a.jsx)(v.l,{variant:null==t||!l.isVerified||s.maxedOut||s.expired?"warning":"success",hideIcon:!0,children:s.maxedOut||s.expired?(0,a.jsx)(I,{title:"Trial Ended",text:"Thanks for trying Railway! Upgrade now to continue using the platform.",cta:"Upgrade now",link:r.workspacePlan({}).url}):(0,a.jsx)(a.Fragment,{children:null==t?(0,a.jsx)(I,{title:o+" or "+i,text:"Your trial expires in ".concat(o," or when you're out of credits. Upgrade to keep your services online."),cta:"Unlock Full Trial",link:r.workspacePlan({}).url,isLimitedTrial:!0}):(0,a.jsx)(a.Fragment,{children:l.isVerified?(0,a.jsx)(I,{title:o+" or "+i,text:"Your trial expires in ".concat(o," or when you're out of credits. Upgrade to keep your services online."),cta:"Choose a Plan",link:r.workspacePlan({}).url}):(0,a.jsx)(I,{title:o+" or "+i,text:"Your trial expires in ".concat(o," or when you're out of credits. Upgrade to keep your services online."),cta:"Upgrade now",link:r.workspacePlan({}).url,isLimitedTrial:!0})})})})},C=()=>{let[{user:e,githubInfo:l}]=(0,f.Jd)();return null==e?null:(0,a.jsx)(L,{user:e,githubInfo:l})};var D=t(45479),A=t(2551),P=t(31754),T=t(13077);let S=e=>{let{variant:l,text:t,cta:r,onClickCta:s}=e;return(0,a.jsx)(v.l,{variant:l,className:"my-8",hideIcon:!0,children:(0,a.jsxs)("div",{className:"w-full flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-8 items-center lg:justify-between",children:[(0,a.jsxs)(c.z,{align:"center",space:2,children:[(0,a.jsx)(T.In,{icon:A.RIJ}),(0,a.jsx)(y.ax,{className:"font-medium",children:t})]}),(0,a.jsx)(c.z,{align:"center",className:"min-w-max",children:(0,a.jsx)(P.$n,{size:"sm",onClick:s,children:r})})]})})},U=e=>{let{state:l,link:t}=e,{navActions:r}=(0,h.c)();return(0,a.jsx)(S,{variant:l===D.zZZ.Unpaid?"danger":"warning",text:"Your subscription is ".concat((0,b.Px)(l).toLowerCase(),". Please pay the outstanding balance to avoid service disruption and continue using Railway."),cta:"Go to billing",onClickCta:()=>r.push(t)})};var z=t(50253),R=t.n(z);let _=e=>{let{resetDate:l}=e,t=(0,r.useMemo)(()=>{let e=R()(l),t=R()();return e.diff(t,"days")},[l]),{routes:s}=(0,h.c)();return(0,a.jsx)(v.l,{variant:"danger",hideIcon:!0,children:(0,a.jsxs)(c.z,{align:"center",justify:"between",className:"w-full",children:[(0,a.jsxs)(c.z,{align:"center",space:2,children:[(0,a.jsx)(y.ax,{className:"font-medium",children:"Out of Credits"}),(0,a.jsx)("span",{className:"opacity-50",children:"|"}),(0,a.jsxs)(y.ax,{children:["You have run out of credits. Your balance will reset"," ",(0,a.jsx)("span",{className:"font-medium",children:t<1?"today":"in ".concat(t," ").concat((0,b.td)("day",t))}),"."]})]}),(0,a.jsx)(P.vx,{...s.workspacePlan({}),variant:"ghost",color:"red",size:"sm",children:"Upgrade"})]})})},M=()=>{let{workspaceCustomer:e}=(0,o.hA)();return null!=e&&e.hasExhaustedFreePlan?(0,a.jsx)(_,{resetDate:e.billingPeriod.end}):null};var E=t(4766),F=t(81154),W=t(84044),V=t(28592),O=t(31736),B=t(77505),G=t(61436),Y=t(37590),q=t(88887);let X=(0,W.Iz)(e=>(0,W.tG)("@railway/referral-banner-dismissed-".concat(e),!1,void 0,{getOnInit:!0})),$=()=>{var e,l;let{referralInfo:t,isReferralInfoLoading:s}=(0,O.n)(),{routes:n,navActions:i}=(0,h.c)(),{modalActions:o}=(0,B.U)(),[{user:d}]=(0,f.Jd)(),[u,m]=(0,V.T)(),[x,g]=(0,F.fp)(X((null==d?void 0:d.id)||"anonymous")),p=(0,F.md)(G.yX),j=(0,r.useMemo)(()=>window.location.origin+"?referralCode=".concat(null==t?void 0:t.code),[null==t?void 0:t.code]);if(x)return null;if(s)return(0,a.jsx)(Y.g,{width:"100%",height:"58px"});if(!t||p)return null;let w=((null==t||null==(e=t.referralStats)?void 0:e.pending)||0)+((null==t||null==(l=t.referralStats)?void 0:l.credited)||0),N=w>0;return(0,a.jsx)(v.l,{variant:"primary",hideIcon:!0,children:(0,a.jsxs)("div",{className:"grid items-center gap-x-4 gap-y-2 grid-cols-[1fr_auto] lg:grid-cols-[auto_auto_1fr_auto] w-full",children:[(0,a.jsxs)(c.z,{align:"center",space:2,children:[(0,a.jsx)(A.pD,{className:"text-pink-600"}),(0,a.jsx)(y.ax,{className:"font-semibold",children:"Refer Users & Earn Cash"})]}),(0,a.jsx)("span",{className:"opacity-50 hidden lg:block",children:"|"}),(0,a.jsxs)("div",{className:"grid gap-1 row-start-2 col-span-2 lg:row-start-1 lg:col-span-1 lg:col-start-3",children:[(0,a.jsxs)(y.ax,{children:["Get paid ",E.REFERRER_CASH_PERCENTAGE,"% commission on all Railway revenue from your referrals"]}),N&&(0,a.jsxs)(y.ax,{className:"text-pink-600",children:["You're earning cash from ",w," ",(0,b.td)("user",w)," so far!"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.$n,{variant:"ghost",size:"sm",iconRight:u?A.Jlk:A.QRo,className:"py-1 px-3 rounded-lg",iconStyles:"w-4 h-4",onClick:()=>{m(j),o.createToast((0,a.jsx)(q.y8,{variant:"success",title:"Referral link copied!"}))},children:(0,a.jsx)(y.ax,{className:"font-mono text-sm truncate max-w-[200px]",children:null==t?void 0:t.code})}),(0,a.jsx)(P.$n,{variant:"ghost",color:"pink",size:"sm",onClick:()=>{i.push(n.workspaceReferrals({}))},className:"hidden sm:flex",children:"Read More"}),(0,a.jsx)(P.K0,{iconStyles:"text-pink-600 !h-4 !w-4",title:"Dismiss referral banner",variant:"ghost",color:"pink",icon:A.X,onClick:()=>{g(!0)}})]})]})})};var J=t(64657);let Q=e=>{var l;let{currentUsage:t}=e,{workspace:s,isPro:n,isHobby:d,isFree:c,isLoading:u,workspaceRole:m}=(0,o.hA)(),{dashboard:x}=(0,i.MZ)(),{routes:g}=(0,h.c)(),p=(0,r.useMemo)(()=>null==s?void 0:s.customerState,[s,x]),v="UNPAID"===p||"PAST_DUE"===p,f=m===D.acM.Admin&&(n||d)&&!v;return u||x.isLoading?null:(0,a.jsxs)(a.Fragment,{children:[!n&&!d&&!c&&(0,a.jsx)(C,{}),v&&(0,a.jsx)(U,{state:p,link:g.workspaceBilling({teamId:null!=(l=null==s?void 0:s.teamId)?l:void 0})}),n&&(0,a.jsx)(j,{}),c&&(0,a.jsx)(M,{}),null!=t&&(0,a.jsx)(J.T,{currentUsageTotal:t,onlyShowIfOverLimit:!0}),f&&(0,a.jsx)($,{})]})};var H=t(7397),Z=t(80430),K=t(71144);let ee=(0,k.xW)("flex items-center justify-center text-gray-400 bg-transparent p-2 w-xs h-xs rounded-sm","hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-500","data-[state=on]:bg-gray-100 data-[state=on]:text-gray-500"),el=e=>{let{numProjects:l,numDeletedProjects:t}=e,{config:r,setConfig:s}=(0,i.gQ)(),{track:n}=(0,K.j)();return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex items-center border-r-2 border-gray-200 pr-4 mr-4 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{s(e=>({...e,showDeletedProjects:!1}))},className:(0,k.xW)("text-sm text-gray-600",t>0&&!r.showDeletedProjects?"font-bold":"hover:opacity-60"),children:[l," ",(0,b.td)("Project",l)]}),t>0&&(0,a.jsxs)("button",{onClick:()=>{s(e=>({...e,showDeletedProjects:!0}))},className:(0,k.xW)("text-sm text-gray-600",r.showDeletedProjects?"font-bold":"hover:opacity-60"),children:[t," Removed"]})]}),(0,a.jsxs)("div",{className:"group flex items-center gap-2 rounded-md px-2 -ml-2 hover:bg-gray-50 focus:outline-none",children:[(0,a.jsx)(T.In,{icon:A.hDL,className:"text-gray-500 group-hover:text-gray-500",size:"sm"}),(0,a.jsx)(Z.l,{label:{text:"Project sort",hidden:!0},size:"sm",variant:"outline",value:r.projectSort,options:[{text:"Recent Activity",value:"updatedAt"},{text:"Creation Date",value:"createdAt"},{text:"Alphabetical",value:"alphabetical"}],selectStyles:"rounded-none border-none pl-0 pr-8 text-sm text-gray-600 hover:bg-transparent group-hover:text-gray-800",iconStyles:"text-gray-400 group-hover:text-gray-600",onChange:e=>{e&&(s(l=>({...l,projectSort:e})),n({action:"Change",object:"Project Sort",properties:{value:e}}))}})]})]}),(0,a.jsxs)(H.bL,{type:"single",value:r.projectViewType,"aria-label":"Project view display",className:"flex items-center border border-gray-100 rounded",onValueChange:e=>{e&&(s(l=>({...l,projectViewType:e})),n({action:"Change",object:"Project Display",properties:{value:e}}))},children:[(0,a.jsx)(H.q7,{value:"list",className:ee,children:(0,a.jsx)(T.In,{icon:A.B8B,size:"sm"})}),(0,a.jsx)(H.q7,{value:"grid",className:ee,children:(0,a.jsx)(T.In,{icon:A.xA9,size:"sm"})})]})]})};var et=t(21512),ea=t(35645),er=t(32080),es=t(71778),en=t(52992),ei=t(87418);let eo=()=>{var e,l,t;let{routes:s}=(0,h.c)(),{workspace:n,isHobby:i,isPro:d}=(0,o.hA)(),{teamMembers:u}=(0,et.Q5)(null==n?void 0:n.teamId),{members:m,total:x}=(0,r.useMemo)(()=>{if(null==u.data)return{members:null,total:0};if(u.data.length<=5)return{members:u.data,total:u.data.length};let e=u.data.length;return{members:u.data.sort(()=>Math.random()-.5).slice(0,5),total:e}},[u.data]),g=(0,es.De)(null==n?void 0:n.teamId),{showModal:p}=(0,en.h)();return(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center justify-between",children:[(0,a.jsx)(er.E,{triggerClassName:"-ml-2 sm:-ml-3"}),(0,a.jsxs)("div",{className:"flex gap-4 items-center mt-2 sm:mt-0",children:[(0,a.jsx)(N.N,{...s.workspacePeople({teamId:null!=(e=null==n?void 0:n.teamId)?e:void 0}),children:null!=m&&(0,a.jsxs)("div",{className:"flex -space-x-2",children:[m.map(e=>(0,a.jsx)(ea.e,{email:e.email,avatar:e.avatar,overrideSize:"28px",className:"border-transparent border-2 rounded-sm"},e.id)),x>5&&(0,a.jsx)(c.T,{align:"center",justify:"center",className:"w-7 h-7 rounded-full overflow-hidden text-sm bg-gray-100 border-background border-2 flex items-center justify-center",children:(0,a.jsx)(T.In,{icon:A.a4,size:"xs",className:"text-gray-500"})})]})}),(0,a.jsxs)("div",{className:"flex gap-2 flex-grow justify-end",children:[(0,a.jsx)(P.sh,{color:"gray",size:"sm",variant:"outline",icon:A.wB_,className:"",...s.workspace({})}),(null==n?void 0:n.teamId)!=null&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.vx,{variant:"outline",size:"sm",icon:A.pD,className:"hidden md:flex",...s.workspaceReferrals({}),children:"Refer"}),(0,a.jsx)(P.vx,{variant:"outline",size:"sm",icon:A.ypN,className:"",...s.workspacePeople({teamId:null!=(l=null==n?void 0:n.teamId)?l:void 0}),children:"Invite"})]}),i||d||g.allowed?(0,a.jsx)(P.vx,{variant:"primary",size:"sm",icon:A.FWt,...s.newProject({teamId:null!=(t=null==n?void 0:n.teamId)?t:void 0}),children:"New"}):(0,a.jsx)(P.$n,{variant:"primary",size:"sm",icon:A.FWt,onClick:()=>p(ei.p,{title:"Upgrade to create a new project",description:"Free plan resource creation has been exceeded."}),children:"New"})]})]})]})})};var ed=t(76043),ec=t(79006);let eu=e=>{let{teamId:l}=e,[{user:t}]=(0,f.Jd)(),{routes:r}=(0,h.c)(),{workspace:s}=(0,o.hA)(),n=(0,ed.a)(),{colorMode:i}=(0,ec.DP)(),{modalActions:d}=(0,B.U)(),u=n?"/illustrations/dashboard-empty-state-".concat("dark"===i?"dark":"light",".svg"):null,m=n?"/illustrations/dashboard-empty-state-circles-".concat("dark"===i?"dark":"light",".svg"):null;return null==t?null:(0,a.jsxs)(N.N,{...r.newProject({teamId:l}),className:(0,k.xW)("group","relative flex flex-col md:flex-row items-center justify-center flex-grow border border-dashed border-gray-200 rounded-lg py-36 h-[444px]","hover:border-pink-500"),children:[null!=u&&null!=m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{alt:"",src:u,style:{width:136,height:136},className:"bg-background z-1 h-max"}),(0,a.jsx)("img",{alt:"",src:m,className:"absolute left-0 top-0 bottom-0 hidden lg:block"})]}):(0,a.jsx)("div",{style:{width:136,height:136}}),(0,a.jsxs)(c.T,{className:"max-w-[380px] mt-8 md:mt-0 md:ml-8 text-center md:text-left",children:[(0,a.jsx)(y.mM,{className:"mb-2 text-gray-600 font-medium",children:"Create a New Project"}),(0,a.jsx)(y.ax,{className:"mb-5 text-gray-400",children:"Deploy a GitHub Repository, Provision a Database, or create an Empty Project to start from local."})]})]})},em=e=>{let{projects:l,teamId:t}=e,{config:s,setConfig:n}=(0,i.gQ)(),o=(0,i.tc)(l,s.projectSort);return(o=(0,i.kz)(o,s.showDeletedProjects),(0,r.useLayoutEffect)(()=>{0===o.length&&s.showDeletedProjects&&n(e=>({...e,showDeletedProjects:!1}))},[o.length,s.showDeletedProjects]),0===l.length)?(0,a.jsx)(eu,{teamId:null!=t?t:void 0}):"list"===s.projectViewType?(0,a.jsx)("div",{className:"grid gap-1",children:o.map(e=>(0,a.jsx)(x.X,{project:e,className:"h-full"},e.id))}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>(0,a.jsx)(x.b,{project:e,className:"h-full"},e.id))})},ex=()=>{var e;let{dashboard:l,projectsByWorkspace:t}=(0,i.MZ)(),{workspace:x,isLoading:h}=(0,o.hA)(),{result:g}=(e=>{let{graphqlClient:l}=(0,n.q)();return(0,s.W)(["workspace","currentUsage",e],async()=>{if(null==e)throw Error("Workspace ID is required");return(await l.workspaceCurrentUsage({workspaceId:e})).workspace.customer.currentUsage},{enabled:null!=e})})(null==x?void 0:x.id),p=(0,r.useMemo)(()=>{var e;return x&&null!=(e=t[x.id])?e:[]},[t,null==x?void 0:x.id]);return l.isLoading?null:(0,a.jsxs)(u.YS,{children:[(0,a.jsx)(m.F,{hideTrialBanner:!0}),(0,a.jsx)(c.T,{className:"px-5 md:px-8 w-full pt-12",children:(0,a.jsxs)("main",{className:"grid gap-12 max-w-container mx-auto w-full pb-24",children:[(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)(eo,{}),(0,a.jsx)(Q,{currentUsage:g.data})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)(d.c,{className:"my-0"}),!h&&(0,a.jsxs)(a.Fragment,{children:[p.length>0&&(0,a.jsx)(el,{numProjects:p.filter(e=>null==e.deletedAt).length,numDeletedProjects:p.filter(e=>null!=e.deletedAt).length}),(0,a.jsx)(em,{projects:p,teamId:null!=(e=null==x?void 0:x.teamId)?e:void 0})]})]})]})})]})},eh=()=>{let[{user:e}]=(0,f.Jd)();return null==e?null:(0,a.jsx)(ex,{})};eh.requireAuthentication=!0;let eg=eh},38023:(e,l,t)=>{"use strict";t.d(l,{E:()=>r});var a=t(25963);let r=e=>(0,a.useMemo)(()=>null!=e&&e.startsWith("*."),[e])},59102:(e,l,t)=>{"use strict";t.d(l,{X:()=>y,b:()=>f});var a=t(50979),r=t(81154),s=t(50253),n=t.n(s),i=t(38023),o=t(70375),d=t(2551),c=t(12645),u=t(36609),m=t(80374),x=t(13077),h=t(47654),g=t(37590),p=t(95662),j=t(42419),v=t(36893);let f=e=>{var l;let{project:t,external:s,className:f,...y}=e,{routes:w}=(0,o.c)(),b=(0,r.md)((0,c.CI)(t)),N=(null==t?void 0:t.services)!=null,k=(null!=(l=null==t?void 0:t.services)?l:[]).length,I=w.project({projectId:t.id,environmentId:b}),L=(0,i.E)(null==t?void 0:t.dashboardDomain);return(0,a.jsxs)("div",{className:(0,u.xW)(null==t.deletedAt?"bg-secondaryBg dark:bg-gray-100 hover:bg-gray-100 dark:hover:bg-gray-200":"bg-danger-surface","h-projectItem p-6 rounded-lg relative",f),...y,children:[(0,a.jsx)(h.N,{...I,external:s,name:"Project Card",trackingProperties:{projectId:t.id},className:"absolute inset-0",children:(0,a.jsx)("span",{className:"sr-only",children:"View Project"})}),(0,a.jsxs)("div",{className:"project project-".concat(t.name," flex flex-col gap-2 h-full pointer-events-none relative z-10"),children:[(0,a.jsxs)(p.T,{className:"flex-grow",children:[(0,a.jsx)("p",{className:"font-medium mb-3",children:t.name}),(null==t?void 0:t.description)!=null&&(null==t?void 0:t.description.trim())!==""&&(0,a.jsx)(j.xC,{className:"line-clamp-2",children:null==t?void 0:t.description})]}),null!=t.deletedAt&&n()(new Date).isBefore(t.deletedAt)?(0,a.jsxs)(p.z,{className:"flex space-x-2 items-center my-1 text-danger",children:[(0,a.jsx)(x.In,{icon:d.c2w,size:"sm"}),(0,a.jsxs)("p",{className:"text-sm",children:["Removed"," ",(0,a.jsx)(v.s,{timeStyle:"short",children:t.deletedAt})]})]}):null,N?0===k?(0,a.jsx)(j.xC,{children:"empty project"}):k>1?(0,a.jsxs)(j.xC,{children:[k," ",(0,m.td)("service",k)]}):(null==t?void 0:t.dashboardDomain)!=null?(0,a.jsxs)(p.z,{align:"center",space:2,className:"text-gray-600",children:[(0,a.jsx)(x.In,{icon:d.N_E,size:"xs"}),(0,a.jsx)("div",{className:"block text-sm truncate overflow-hidden overflow-ellipsis pointer-events-auto",children:L?null==t?void 0:t.dashboardDomain:(0,a.jsx)(h.N,{href:"https://".concat(null==t?void 0:t.dashboardDomain),variant:"highlight",name:"Project Card Static URL",children:null==t?void 0:t.dashboardDomain})})]}):(0,a.jsx)(j.xC,{children:"1 service"}):(0,a.jsx)(g.g,{width:"60%",height:"21px",backgroundColor:"var(--gray-100)",foregroundColor:"var(--gray-200)"})]})]})},y=e=>{var l;let{project:t,external:s,className:f,...y}=e,w=(0,r.md)((0,c.CI)(t)),{routes:b}=(0,o.c)(),N=(null==t?void 0:t.services)!=null,k=(null!=(l=null==t?void 0:t.services)?l:[]).length,I=b.project({projectId:t.id,environmentId:w}),L=(0,i.E)(null==t?void 0:t.dashboardDomain);return(0,a.jsxs)("div",{className:(0,u.xW)("p-4 rounded-lg relative overflow-hidden max-w-full",null==t.deletedAt?"bg-secondaryBg dark:bg-gray-100 hover:bg-gray-100 dark:hover:bg-gray-200":"bg-danger-surface",f),...y,children:[(0,a.jsx)(h.N,{...I,external:s,name:"Project Card",trackingProperties:{projectId:t.id},className:"absolute inset-0",children:(0,a.jsx)("span",{className:"sr-only",children:"View Project"})}),(0,a.jsxs)("div",{className:"project project-".concat(t.name," flex flex-col md:flex-row gap-2 md:items-center justify-between pointer-events-none relative z-10"),children:[(0,a.jsxs)("div",{className:"grid gap-0.5",children:[(0,a.jsx)("p",{className:"font-medium overflow-hidden overflow-ellipsis",children:t.name}),(null==t?void 0:t.description)!=null&&(null==t?void 0:t.description.trim())!==""&&(0,a.jsx)(j.xC,{className:"line-clamp-2 overflow-hidden overflow-ellipsis max-w-xl",children:null==t?void 0:t.description})]}),(0,a.jsxs)(p.z,{className:"flex items-center gap-4",children:[null!=t.deletedAt&&n()(new Date).isBefore(t.deletedAt)?(0,a.jsxs)(p.z,{className:"flex space-x-2 items-center my-1 text-danger",children:[(0,a.jsx)(x.In,{icon:d.c2w,size:"sm"}),(0,a.jsx)("p",{className:"text-sm",children:(0,a.jsx)(v.s,{timeStyle:"short",children:t.deletedAt})})]}):null,N?0===k?(0,a.jsx)(j.xC,{children:"empty project"}):(null==t?void 0:t.dashboardDomain)!=null?(0,a.jsxs)(p.z,{align:"center",space:2,className:"text-gray-600",children:[(0,a.jsx)(x.In,{icon:d.N_E,size:"xs"}),(0,a.jsx)("div",{className:"block text-sm truncate overflow-hidden overflow-ellipsis pointer-events-auto",children:L?null==t?void 0:t.dashboardDomain:(0,a.jsx)(h.N,{href:"https://".concat(null==t?void 0:t.dashboardDomain),variant:"highlight",name:"Project Card Static URL",children:null==t?void 0:t.dashboardDomain})})]}):k>=1?(0,a.jsxs)(j.xC,{children:[k," ",(0,m.td)("service",k)]}):null:(0,a.jsx)(g.g,{width:"60%",height:"21px",backgroundColor:"var(--gray-100)",foregroundColor:"var(--gray-200)"})]})]})]})}},64657:(e,l,t)=>{"use strict";t.d(l,{T:()=>b});var a=t(50979),r=t(25963),s=t(73648),n=t(2551),i=t(77505),o=t(86337),d=t(36609),c=t(31754),u=t(95662),m=t(42419),x=t(4766),h=t(90029),g=t(25508),p=t(55850),j=t(72898),v=t(61259),f=t(86954),y=t(88887);let w=e=>{var l,t;let{customerId:s,usageLimit:o,onUpdate:d}=e,{modalActions:w}=(0,i.U)(),{usageLimitActions:b}=(e=>{let{customerId:l}=e,{graphqlClient:t}=(0,p.q)(),a=["workspace"];return{usageLimitActions:{setUsageLimit:(0,j.n)(a,async e=>(await t.usageLimitSet(e),!0)),removeUsageLimit:(0,j.n)(a,async e=>(await t.usageLimitRemove(e),!0))}}})({customerId:s}),[N,k]=(0,r.useState)(null!=(l=null==o?void 0:o.hardLimit)?l:null),[I,L]=(0,r.useState)(null!=(t=null==o?void 0:o.softLimit)?t:null),[C,D]=(0,r.useState)(!1),[A,P]=(0,g.b)(),T=async()=>{if(null!=I){D(!0);try{await b.setUsageLimit({input:{customerId:s,hardLimitDollars:N,softLimitDollars:I}}),d(),w.createToast((0,a.jsx)(y.y8,{variant:"success",title:"Success",description:"Your usage limit was updated!"})),w.exitModal()}catch(e){P(e.message)}D(!1)}},S=async()=>{D(!0);try{await b.removeUsageLimit({input:{customerId:s}}),d(),w.createToast((0,a.jsx)(y.y8,{variant:"success",title:"Success",description:"Your usage limit was removed!"})),w.exitModal()}catch(e){P(e.message)}D(!1)};return(0,a.jsx)(h.aF,{title:"Usage Limits",children:(0,a.jsxs)(v.lV,{className:"space-y-8",onSubmit:T,children:[(0,a.jsx)(h.wt,{children:"Usage limits"}),(0,a.jsxs)(u.T,{space:3,children:[(0,a.jsx)(m.ax,{className:"font-semibold",children:"Hard limit"}),(0,a.jsx)(m.xC,{children:"When your usage reaches this amount, we will shut down ALL your resources to prevent further charges."}),(0,a.jsx)(f.pd,{type:"number",label:{text:"Hard limit",hidden:!0},placeholder:"150",min:x.MIN_HARD_USAGE_LIMIT_DOLLARS,max:x.MAX_USAGE_LIMIT_DOLLARS,defaultValue:null!=N?N:void 0,onChange:e=>k(Number(e.target.value)),icon:n.G9t})]}),(0,a.jsxs)(u.T,{space:3,children:[(0,a.jsx)(m.ax,{className:"font-semibold",children:"Custom email alert"}),(0,a.jsx)(m.xC,{children:"You will receive an email notification when this limit is hit."}),(0,a.jsx)(f.pd,{type:"number",label:{text:"Soft limit",hidden:!0},placeholder:"25",min:x.MIN_SOFT_USAGE_LIMIT_DOLLARS,max:x.MAX_USAGE_LIMIT_DOLLARS,defaultValue:null!=I?I:void 0,onChange:e=>L(Number(e.target.value)),icon:n.G9t,required:!0})]}),null!=A&&(0,a.jsx)(m.yn,{children:A}),(0,a.jsxs)(u.z,{align:"center",justify:null==o?"end":"between",children:[null!=o&&(0,a.jsx)(c.$n,{variant:"ghost",color:"red",type:"button",className:"font-medium",onClick:S,children:"Remove limits"}),(0,a.jsxs)(u.z,{align:"center",space:4,children:[(0,a.jsx)(c.$n,{type:"button",variant:"outline",color:"gray",onClick:()=>w.exitModal(),children:"Cancel"}),(0,a.jsx)(c.$n,{type:"submit",disabled:null==I||C,children:"Save limit"})]})]})]})})},b=e=>{let{currentUsageTotal:l,onlyShowIfOverLimit:t=!1}=e,{workspaceCustomer:x}=(0,s.hA)(),{invalidateWorkspace:h}=(0,o.iS)(),{modalActions:g}=(0,i.U)(),{isNearingLimit:p,isOverLimit:j,percentageUsed:v}=(0,r.useMemo)(()=>{let e=!1,t=!1;if((null==x?void 0:x.usageLimit)==null||(null==x?void 0:x.usageLimit.hardLimit)==null)return{isNearingLimit:e,isOverLimit:t,percentageUsed:0};let a=null==x?void 0:x.usageLimit.hardLimit;return a&&l<a&&l>=.75*a&&(e=!0),a&&l>=a&&(t=!0),{isNearingLimit:e,isOverLimit:t,percentageUsed:a?l/a*100:0}},[null==x?void 0:x.usageLimit,l]),f=()=>{x&&g.openModal((0,a.jsx)(w,{customerId:x.id,usageLimit:x.usageLimit,onUpdate:h}))};return(null==x?void 0:x.usageLimit)==null||(null==x?void 0:x.usageLimit.hardLimit)==null?t?null:(0,a.jsxs)(c.$n,{variant:"outline",color:"gray",onClick:f,children:[(null==x?void 0:x.usageLimit)==null?"Set":"Update"," usage limits"]}):!t||p||j?(0,a.jsxs)(u.T,{space:2,children:[(0,a.jsxs)(u.z,{justify:"between",align:"center",children:[(0,a.jsxs)(u.z,{space:1,align:"center",children:[(0,a.jsx)(m.ax,{className:"font-semibold",children:"Limit"}),(0,a.jsx)(c.K0,{title:"Edit usage limit",iconStyles:"text-gray-500",size:"xs",icon:n.Pt,onClick:f})]}),(0,a.jsxs)(m.tj,{className:"text-gray-500",children:[l.toFixed(2)," / ",null==x?void 0:x.usageLimit.hardLimit," USD"]})]}),(0,a.jsx)("div",{className:(0,d.xW)("h-2 w-full bg-gray-100 rounded-lg"),children:(0,a.jsx)("div",{className:(0,d.xW)("h-full rounded-lg",p||j?"bg-red-500":"bg-pink-500"),style:{width:"".concat(v>100?100:v,"%")}})}),p&&(0,a.jsx)(m.tj,{className:"text-red-500",children:"Nearing usage limit. Update limit to keep your services running."}),j&&(0,a.jsxs)(m.tj,{className:"text-red-500",children:[(0,a.jsx)("strong",{children:"All deployments are paused."})," Update limit to resume your services or wait until the next billing cycle."]})]}):null}},79749:(e,l,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(33242)}])}},e=>{e.O(0,[636,6593,8792],()=>e(e.s=79749)),_N_E=e.O()}]);